{"version":3,"file":"standalone.esm.js","sources":["../src/standalone/errors.tsx","../src/standalone/tokenizer.ts","../src/standalone/differ.ts","../src/standalone/focus-parser.ts","../src/standalone/parse-steps.ts","../src/standalone/tuple.ts","../src/standalone/animation-context.ts","../src/standalone/playhead/easing.ts","../src/standalone/playhead/playhead.tsx","../src/standalone/animations.tsx","../src/standalone/themes/base.ts","../src/standalone/styles.tsx","../src/standalone/frame.tsx","../src/standalone/use-window-resize.ts","../src/standalone/dimensions.ts","../src/standalone/themes/utils.ts","../src/standalone/themes/github.ts","../src/standalone/themes/dracula.ts","../src/standalone/themes/duotone-dark.ts","../src/standalone/themes/duotone-light.ts","../src/standalone/themes/night-owl.ts","../src/standalone/themes/oceanic-next.ts","../src/standalone/themes/shades-of-purple.ts","../src/standalone/themes/ultramin.ts","../src/standalone/themes/vs-dark.ts","../src/standalone/code-surfer.tsx"],"sourcesContent":["import React from \"react\";\n\ntype UnknownErrorProps = {\n  error: { toString: () => string };\n};\n\nexport function UnknownError({ error }: UnknownErrorProps) {\n  // TODO link to create issue\n  return <ErrorBox header=\"Oops, there's a problem\" body={error.toString()} />;\n}\n\nexport function grammarNotFound({ lang }: { lang: string }) {\n  return {\n    element: (\n      <ErrorBox\n        header=\"Oops, there's a problem\"\n        body={\n          <React.Fragment>\n            Syntax highlighter for <Mark>\"{lang}\"</Mark> not found.\n            <p>\n              You can try importing it from prismjs with: <br />\n              <Mark>import \"prismjs/components/prism-{lang}\"</Mark>\n            </p>\n            (See{\" \"}\n            <a\n              href=\"https://prismjs.com/#supported-languages\"\n              style={{ color: \"grey\" }}\n            >\n              all the supported languages\n            </a>\n            )\n          </React.Fragment>\n        }\n      />\n    )\n  };\n}\n\nexport function invalidFocusNumber(n: string) {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                <Mark>\"{n}\"</Mark> isn't a valid number{\" \"}\n                {n != focusString && <Mark> (in \"{focusString}\")</Mark>}\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\nexport function invalidLineOrColumnNumber() {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                Are you using \"0\" as a line or column number{\" \"}\n                <Mark>in \"{focusString}\"</Mark>?\n                <br />\n                (Line and column numbers should start at 1, not 0) <br />\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\ntype ErrorBoxProps = {\n  header: React.ReactNode;\n  body: React.ReactNode;\n};\n\nfunction ErrorBox({ header, body }: ErrorBoxProps) {\n  return (\n    <div\n      style={{\n        background: \"#290000\",\n        color: \"#b96f70\",\n        border: \"2px solid #b96f70\",\n        padding: \"10px 30px\",\n        maxWidth: \"90vw\",\n        margin: \"0 auto\",\n        fontFamily: \"monospace\",\n        fontSize: \"1rem\"\n      }}\n    >\n      <h3>{header}</h3>\n      <p>{body}</p>\n    </div>\n  );\n}\n\nfunction StepErrorHeader({ stepIndex }: { stepIndex: number }) {\n  return (\n    <React.Fragment>\n      Oops, there's a problem with the{\" \"}\n      <Mark>\n        {stepIndex + 1}\n        <sup>{ordinal(stepIndex + 1)}</sup> step\n      </Mark>\n    </React.Fragment>\n  );\n}\n\nfunction Mark({ children }: { children: React.ReactNode }) {\n  return (\n    <mark style={{ background: \"none\", color: \"pink\", fontWeight: \"bolder\" }}>\n      {children}\n    </mark>\n  );\n}\n\nfunction ordinal(i: number) {\n  var j = i % 10,\n    k = i % 100;\n  if (j == 1 && k != 11) {\n    return \"st\";\n  }\n  if (j == 2 && k != 12) {\n    return \"nd\";\n  }\n  if (j == 3 && k != 13) {\n    return \"rd\";\n  }\n  return \"th\";\n}\n","import { grammarNotFound } from \"./errors\";\n\n// // https://github.com/PrismJS/prism/issues/1303#issuecomment-375353987\n// global.Prism = { disableWorkerMessageHandler: true };\n// const Prism = require(\"prismjs\");\nimport Prism from \"prismjs\";\n\nconst newlineRe = /\\r\\n|\\r|\\n/;\n\ntype NestedToken = {\n  type: string;\n  content: string | NestedToken[];\n};\n\ntype FlatToken = {\n  type: string;\n  content: string;\n};\n\n// Take a list of nested tokens\n// (token.content may contain an array of tokens)\n// and flatten it so content is always a string\n// and type the type of the leaf\nfunction flattenTokens(tokens: NestedToken[]) {\n  const flatList: FlatToken[] = [];\n  tokens.forEach(token => {\n    const { type, content } = token;\n    if (Array.isArray(content)) {\n      flatList.push(...flattenTokens(content));\n    } else {\n      flatList.push({ type, content });\n    }\n  });\n  return flatList;\n}\n\nfunction wrapToken(\n  prismToken: string | Prism.Token,\n  parentType = \"plain\"\n): NestedToken {\n  if (typeof prismToken === \"string\") {\n    return {\n      type: parentType,\n      content: prismToken\n    };\n  }\n\n  if (Array.isArray(prismToken.content)) {\n    return {\n      type: prismToken.type,\n      content: tokenizeStrings(prismToken.content, prismToken.type)\n    };\n  }\n\n  return wrapToken(prismToken.content, prismToken.type);\n}\n\n// Wrap strings in tokens\nfunction tokenizeStrings(\n  prismTokens: (string | Prism.Token)[],\n  parentType = \"plain\"\n): NestedToken[] {\n  return prismTokens.map(prismToken => wrapToken(prismToken, parentType));\n}\n\nexport default function tokenize(code: string, language = \"javascript\") {\n  const grammar = Prism.languages[language];\n  if (!grammar) {\n    throw grammarNotFound({ lang: language });\n  }\n  const prismTokens = Prism.tokenize(code, Prism.languages[language]);\n  const nestedTokens = tokenizeStrings(prismTokens);\n  const tokens = flattenTokens(nestedTokens);\n\n  let currentLine: FlatToken[] = [];\n  const lines = [currentLine];\n  tokens.forEach(token => {\n    const contentLines = token.content.split(newlineRe);\n\n    const firstContent = contentLines.shift();\n    if (firstContent !== undefined && firstContent !== \"\") {\n      currentLine.push({ type: token.type, content: firstContent });\n    }\n    contentLines.forEach(content => {\n      currentLine = [];\n      lines.push(currentLine);\n      if (content !== \"\") {\n        currentLine.push({ type: token.type, content });\n      }\n    });\n  });\n  return lines;\n}\n","import { diffLines, applyPatch } from \"diff\";\nimport tokenize from \"./tokenizer\";\nimport { InputStep } from \"code-surfer-types\";\nconst newlineRe = /\\r\\n|\\r|\\n/;\n\nfunction myDiff(oldCode: string, newCode: string) {\n  const changes = diffLines(oldCode || \"\", newCode);\n\n  let oldIndex = -1;\n  return changes.map(({ value, count, removed, added }) => {\n    const lines = value.split(newlineRe);\n    // check if last line is empty, if it is, remove it\n    const lastLine = lines.pop();\n    if (lastLine) {\n      lines.push(lastLine);\n    }\n    const result = {\n      oldIndex,\n      lines,\n      count,\n      removed,\n      added\n    };\n    if (!added) {\n      oldIndex += count || 0;\n    }\n    return result;\n  });\n}\n\nfunction insert<T>(array: T[], index: number, elements: T[]) {\n  return array.splice(index, 0, ...elements);\n}\n\ntype Line = {\n  content: string;\n  slides: number[];\n  tokens: { type: string; content: string }[];\n};\n\nfunction slideDiff(\n  lines: Line[],\n  codes: string[],\n  slideIndex: number,\n  language: string\n) {\n  const prevLines = lines.filter(l => l.slides.includes(slideIndex - 1));\n  const prevCode = codes[slideIndex - 1] || \"\";\n  const currCode = codes[slideIndex];\n\n  const changes = myDiff(prevCode, currCode);\n\n  changes.forEach(change => {\n    if (change.added) {\n      const prevLine = prevLines[change.oldIndex];\n      const addAtIndex = lines.indexOf(prevLine) + 1;\n      const addLines = change.lines.map(content => ({\n        content,\n        slides: [slideIndex],\n        tokens: []\n      }));\n      insert(lines, addAtIndex, addLines);\n    } else if (!change.removed) {\n      for (let j = 1; j <= (change.count || 0); j++) {\n        prevLines[change.oldIndex + j].slides.push(slideIndex);\n      }\n    }\n  });\n\n  const tokenLines = tokenize(currCode, language);\n  const currLines = lines.filter(l => l.slides.includes(slideIndex));\n  currLines.forEach((line, index) => (line.tokens = tokenLines[index]));\n}\n\nexport function parseLines(codes: string[], language: string) {\n  const lines: Line[] = [];\n  for (let slideIndex = 0; slideIndex < codes.length; slideIndex++) {\n    slideDiff(lines, codes, slideIndex, language);\n  }\n  return lines;\n}\n\nexport function getSlides(codes: string[], language: string) {\n  // codes are in reverse cronological order\n  const lines = parseLines(codes, language);\n  // console.log(\"lines\", lines);\n  return codes.map((_, slideIndex) => {\n    return lines\n      .map((line, lineIndex) => ({\n        content: line.content,\n        tokens: line.tokens,\n        isNew: !line.slides.includes(slideIndex + 1),\n        show: line.slides.includes(slideIndex),\n        key: lineIndex\n      }))\n      .filter(line => line.show);\n  });\n}\n\nexport function getCodes(rawSteps: InputStep[]) {\n  const codes: string[] = [];\n\n  rawSteps.forEach((s, i) => {\n    if (s.lang === \"diff\" && i > 0) {\n      codes[i] = applyPatch(codes[i - 1], s.code);\n    } else {\n      codes[i] = s.code;\n    }\n  });\n\n  return codes;\n}\n","import flat from \"array.prototype.flat\";\nimport * as errors from \"./errors\";\n\ntype LineIndex = number;\ntype ColumnIndex = number;\n\nexport function parseFocus(focus: string) {\n  if (!focus) {\n    throw new Error(\"Focus cannot be empty\");\n  }\n\n  try {\n    const parts = focus.split(/,(?![^\\[]*\\])/g).map(parsePart);\n\n    return new Map<LineIndex, boolean | ColumnIndex[]>(flat(parts));\n  } catch (error) {\n    if (error.withFocusString) {\n      throw error.withFocusString(focus);\n    } else {\n      throw error;\n    }\n  }\n}\n\nfunction parsePart(part: string) {\n  // a part could be\n  // - a line number: \"2\"\n  // - a line range: \"5:9\"\n  // - a line number with a column selector: \"2[1,3:5,9]\"\n  const columnsMatch = part.match(/(\\d+)\\[(.+)\\]/);\n  if (columnsMatch) {\n    const [, line, columns] = columnsMatch;\n    const columnsList = columns.split(\",\").map(expandString);\n    const lineIndex = Number(line) - 1;\n    const columnIndexes = flat(columnsList).map(c => c - 1);\n    return [[lineIndex, columnIndexes]];\n  } else {\n    return expandString(part).map(lineNumber => [lineNumber - 1, true]);\n  }\n}\n\nfunction expandString(part: string) {\n  // Transforms something like\n  // - \"1:3\" to [1,2,3]\n  // - \"4\" to [4]\n  const [start, end] = part.split(\":\");\n\n  // todo check if start is 0, line numbers and column numbers start at 1\n\n  if (!isNaturalNumber(start)) {\n    throw errors.invalidFocusNumber(start);\n  }\n\n  const startNumber = Number(start);\n\n  if (startNumber < 1) {\n    throw errors.invalidLineOrColumnNumber();\n  }\n\n  if (!end) {\n    return [startNumber];\n  } else {\n    if (!isNaturalNumber(end)) {\n      throw errors.invalidFocusNumber(end);\n    }\n\n    const list: number[] = [];\n    for (let i = startNumber; i <= +end; i++) {\n      list.push(i);\n    }\n    return list;\n  }\n}\n\nfunction isNaturalNumber(n: any) {\n  n = n.toString(); // force the value in case it is not\n  var n1 = Math.abs(n),\n    n2 = parseInt(n, 10);\n  return !isNaN(n1) && n2 === n1 && n1.toString() === n;\n}\n","import { getSlides, getCodes } from \"./differ\";\nimport { parseFocus } from \"./focus-parser\";\nimport { InputStep, Step } from \"code-surfer-types\";\n\ntype Token = { type: string; content: string; key?: number; focus?: boolean };\n\ntype Line = {\n  content: string;\n  tokens: Token[];\n  isNew: boolean;\n  show: boolean;\n  key: number;\n  focus?: boolean;\n  focusPerToken?: boolean;\n};\n\nexport function parseSteps(rawSteps: InputStep[], lang: string): Step[] {\n  const codes = getCodes(rawSteps);\n\n  const stepsLines = getSlides(codes.reverse(), lang).reverse();\n  const steps = rawSteps.map((step, i) => {\n    const lines = stepsLines[i];\n    try {\n      return parseStep(step, lines);\n    } catch (e) {\n      if (e.withStepIndex) {\n        throw e.withStepIndex(i);\n      } else {\n        throw e;\n      }\n    }\n  });\n\n  steps.forEach(step => {\n    const { lines, focusMap } = step;\n    lines.forEach((line, index) => {\n      line.focus = focusMap.has(index);\n      const columnFocus = focusMap.get(index);\n      line.focusPerToken = Array.isArray(columnFocus);\n      if (Array.isArray(columnFocus)) {\n        // this mutates the tokens array in order to change it to the same line in other steps\n        splitTokensToColumns(line.tokens);\n        line.tokens = setTokenFocus(line.tokens, columnFocus);\n      }\n    });\n  });\n\n  return steps;\n}\n\nfunction parseStep(step: InputStep, lines: Line[]) {\n  const { focus, ...rest } = step;\n  let focusMap = focus ? parseFocus(focus) : getDefaultFocus(lines);\n\n  const focusIndexes: number[] = Array.from(focusMap.keys());\n  const focusStart = Math.min.apply(Math, focusIndexes);\n  const focusEnd = Math.max.apply(Math, focusIndexes);\n\n  return {\n    lines,\n    focusMap,\n    focusStart,\n    focusEnd,\n    focusCenter: (focusStart + focusEnd + 1) / 2,\n    focusCount: focusEnd - focusStart + 1,\n    ...rest\n  };\n}\n\nfunction getDefaultFocus(lines: Line[]) {\n  const indexes = lines\n    .map((line, index) => (line.isNew ? index : -1))\n    .filter(index => index !== -1);\n  return new Map<number, boolean | number[]>(indexes.map(i => [i, true]));\n}\n\nfunction splitTokensToColumns(tokenArray: Token[]) {\n  const tokens = Array.from(tokenArray);\n  let key = 0;\n  tokenArray.splice(0, tokenArray.length);\n  tokens.forEach(token => {\n    const chars = Array.from(token.content);\n    chars.forEach(char =>\n      tokenArray.push({ ...token, content: char, key: key++ })\n    );\n  });\n}\n\nfunction setTokenFocus(tokens: Token[], focusColumns: number[]) {\n  // Assumes that tokens are already splitted in columns\n  // Return new token objects to avoid changing other steps tokens\n  return tokens.map((token, i) => ({\n    ...token,\n    focus: focusColumns.includes(i)\n  }));\n}\n","export class Tuple<T> {\n  prev: Maybe<T>;\n  next: Maybe<T>;\n\n  constructor(prev: Maybe<T>, next: Maybe<T>) {\n    this.prev = prev;\n    this.next = next;\n  }\n\n  spread(): [Maybe<T>, Maybe<T>] {\n    const prev = this.prev;\n    const next = this.next;\n    return [prev, next];\n  }\n\n  select<S>(selector: (x: T) => S) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new Tuple(newPrev, newNext);\n  }\n\n  selectMany<S extends { key?: any }>(selector: (x: T) => S[]) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new ArrayTuple(newPrev, newNext);\n  }\n\n  get(_key: any) {\n    throw Error(\"Get only supported in ArrayTuple\");\n  }\n\n  map(_mapper: any) {\n    throw Error(\"Map only supported in ArrayTuple\");\n  }\n}\n\nexport class ArrayTuple<T extends { key?: any }> extends Tuple<T[]> {\n  _dict?: Map<any, Tuple<T>>;\n\n  _getChildrenMap() {\n    if (!this._dict) {\n      const [maybePrevs, maybeNexts] = this.spread();\n      const prevs: T[] = maybePrevs || [];\n      const nexts: T[] = maybeNexts || [];\n\n      const unsortedMap = new Map<any, { prev: Maybe<T>; next?: Maybe<T> }>(\n        prevs.map(prev => [prev.key, { prev }])\n      );\n      nexts.forEach(next => {\n        const { prev } = unsortedMap.get(next.key) || { prev: undefined };\n        unsortedMap.set(next.key, { prev, next });\n      });\n\n      const sortedKeys = Array.from(unsortedMap.keys());\n      sortedKeys.sort((a, b) => (a < b ? -1 : a > b ? 1 : 0));\n      this._dict = new Map<any, Tuple<T>>(\n        sortedKeys.map(key => {\n          const { prev = undefined, next = undefined } =\n            unsortedMap.get(key) || {};\n          return [key, new Tuple(prev, next)];\n        })\n      );\n    }\n    return this._dict;\n  }\n\n  get(key: any) {\n    const childrenMap = this._getChildrenMap();\n    return childrenMap.get(key);\n  }\n\n  map<M>(mapper: (t: Tuple<T>, key?: any, self?: ArrayTuple<T>) => M) {\n    const childrenMap = this._getChildrenMap();\n    const result: M[] = [];\n    childrenMap.forEach((tuple, key) => result.push(mapper(tuple, key, this)));\n    return result;\n  }\n}\n","import React from \"react\";\nimport { Tuple, ArrayTuple } from \"./tuple\";\nimport { AnimationAndConfig, AnimationConfig, Animation } from \"playhead-types\";\n\nexport class Context<T> {\n  tuple: Tuple<T>;\n  t: number;\n  parent: ListContext<T> | undefined;\n\n  constructor(tuple: Tuple<T>, t: number, parent?: ListContext<T>) {\n    this.tuple = tuple;\n    this.t = t;\n    this.parent = parent;\n  }\n\n  useSelect<S>(selector: (x: T) => S) {\n    const newTuple = React.useMemo(() => this.tuple.select(selector), [\n      this.tuple\n    ]);\n    return new Context(newTuple, this.t);\n  }\n\n  useSelectMany<S extends { key?: any }>(\n    selector: (x: T) => S[]\n  ): ListContext<S> {\n    const newTuple = React.useMemo(() => this.tuple.selectMany(selector), [\n      this.tuple\n    ]);\n\n    return new ListContext(newTuple, this.t);\n  }\n\n  spread() {\n    return this.tuple.spread();\n  }\n\n  animate<R>(animation: Animation<T, R>, config = {} as AnimationConfig<T>): R {\n    const [prev, next] = this.tuple.spread();\n\n    if (config.when && !config.when(prev, next)) {\n      return {} as R;\n    }\n\n    let staggeredT = this.t;\n\n    if (config.stagger) {\n      if (!this.parent) {\n        throw Error(\"Can't use stagger without a parent context\");\n      }\n\n      const items = this.parent\n        .map(childCtx => {\n          const [prevChild, nextChild] = childCtx.spread();\n          return {\n            isSelected: !config.when || config.when(prevChild, nextChild),\n            isThisChild: prevChild === prev && nextChild === next\n          };\n        })\n        .filter(x => x.isSelected);\n\n      const N = items.length;\n      if (N > 1) {\n        const currentIndex = items.findIndex(x => x.isThisChild);\n        const duration = 1 - config.stagger;\n        const tick = config.stagger / (N - 1);\n        staggeredT = Math.min(\n          1,\n          Math.max(0, (this.t - currentIndex * tick) / duration)\n        );\n      }\n    }\n\n    return animation(prev, next, staggeredT);\n  }\n\n  animations<R>(animations: AnimationAndConfig<T, R>[]) {\n    const results = animations.map(({ animation, ...config }) =>\n      this.animate(animation, config)\n    );\n    return merge(results);\n  }\n}\n\nexport class ListContext<T extends { key?: any }> extends Context<T[]> {\n  tuple: ArrayTuple<T>;\n\n  constructor(tuple: ArrayTuple<T>, t: number) {\n    super(tuple, t);\n    this.tuple = tuple;\n  }\n\n  map<M>(mapper: (childCtx: Context<T>, key: any) => M): M[] {\n    return this.tuple.map((childTuple: Tuple<T>, key: any) =>\n      mapper(new Context(childTuple, this.t, this), key)\n    );\n  }\n}\n\nexport function useAnimationContext<T>(items: T[], playhead: number) {\n  const prev = items[Math.floor(playhead)];\n  const next = items[Math.floor(playhead) + 1];\n  const tuple = React.useMemo(() => new Tuple(prev, next), [prev, next]);\n  return new Context(tuple, playhead % 1);\n}\n\nconst MULTIPLY = \"multiply\";\n\ntype MergeableObjects<T> = T[];\ntype MergeableArrays<T> = MergeableObjects<T>[];\ntype Mergeable<T> = MergeableObjects<T> | MergeableArrays<T>;\n\nfunction merge<T>(results: Mergeable<T>, composite = MULTIPLY) {\n  const firstResult = results[0];\n  if (results.length < 2) {\n    return firstResult;\n  }\n  if (Array.isArray(firstResult)) {\n    return mergeArrays(results as MergeableArrays<T>, composite);\n  } else {\n    return mergeObjects(results as MergeableObjects<T>, composite);\n  }\n}\n\nfunction mergeObjects<T extends { opacity?: number }>(\n  results: MergeableObjects<T>,\n  composite: string\n) {\n  const merged = Object.assign({}, ...results) as T;\n\n  if (composite === MULTIPLY) {\n    const opacities = results\n      .map(x => x.opacity)\n      .filter(x => x != null) as number[];\n    if (opacities.length !== 0) {\n      merged.opacity = opacities.reduce((a, b) => a * b);\n    }\n  }\n  return merged;\n}\n\nfunction mergeArrays<T>(results: MergeableArrays<T>, composite: string): T[] {\n  const firstResult = results[0];\n  return firstResult.map((_, i) => {\n    return merge(results.map(result => result[i]), composite) as T;\n  });\n}\n","export default {\n  // no easing, no acceleration\n  linear: function(t: number) {\n    return t;\n  },\n  // accelerating from zero velocity\n  easeInQuad: function(t: number) {\n    return t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuad: function(t: number) {\n    return t * (2 - t);\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function(t: number) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n  // accelerating from zero velocity\n  easeInCubic: function(t: number) {\n    return t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutCubic: function(t: number) {\n    return --t * t * t + 1;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function(t: number) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n  // accelerating from zero velocity\n  easeInQuart: function(t: number) {\n    return t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuart: function(t: number) {\n    return 1 - --t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function(t: number) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n  },\n  // accelerating from zero velocity\n  easeInQuint: function(t: number) {\n    return t * t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuint: function(t: number) {\n    return 1 + --t * t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function(t: number) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n  }\n};\n","/* @jsx createAnimation */\nimport easing from \"./easing\";\nconst MULTIPLY = \"multiply\";\n\ndeclare global {\n  namespace createAnimation.JSX {\n    interface IntrinsicElements {\n      tween;\n      chain;\n      step;\n      delay;\n      parallel;\n    }\n  }\n}\n\n/* eslint-disable */\nfunction mergeResults(results, composite = null) {\n  const firstResult = results[0];\n  if (results.length < 2) {\n    return firstResult;\n  }\n  if (Array.isArray(firstResult)) {\n    return firstResult.map((_, i) => {\n      return mergeResults(results.map(result => result[i]), composite);\n    });\n  } else {\n    const merged = Object.assign({}, ...results);\n\n    if (composite === MULTIPLY) {\n      const opacities = results.map(x => x.opacity).filter(x => x != null);\n      if (opacities.length !== 0) {\n        merged.opacity = opacities.reduce((a, b) => a * b);\n      }\n    }\n    return merged;\n  }\n}\n\nconst playhead = {\n  always: (props, context) => t => {\n    return props.value;\n  },\n  step: (props, context) => t => {\n    const { from, to } = props;\n    return t < 0.5 ? from : to;\n  },\n  tween: (props, context) => t => {\n    const { from, to, ease = easing.linear } = props;\n\n    const style = {};\n    Object.keys(from).forEach(key => {\n      const value = from[key] + (to[key] - from[key]) * ease(t);\n      if (key === \"x\") {\n        style[\"transform\"] = `translateX(${value}px)`;\n      } else {\n        style[key] = value;\n      }\n    });\n\n    return style;\n  },\n  chain: ({ children: fns, durations }, ctx) => {\n    return (t, ...args) => {\n      let style = run(fns[0], 0, ctx);\n      let lowerDuration = 0;\n      for (let i = 0; i < fns.length; i++) {\n        const fn = fns[i];\n        const thisDuration = durations[i];\n        const upperDuration = lowerDuration + thisDuration;\n        if (lowerDuration <= t && t <= upperDuration) {\n          const innerT = (t - lowerDuration) / thisDuration;\n          style = mergeResults([style, run(fn, innerT, ctx)]);\n        } else if (upperDuration < t) {\n          // merge the end of previous animation\n          style = mergeResults([style, run(fn, 1, ctx)]);\n        } else if (t < lowerDuration) {\n          // merge the start of future animation\n          style = mergeResults([run(fn, 0, ctx), style]);\n        }\n        lowerDuration = upperDuration;\n      }\n      return style;\n    };\n  },\n  delay: () => () => ({}),\n  parallel: ({ children: fns }, ctx) => {\n    return t => {\n      const styles = fns.map(fn => run(fn, t, ctx));\n      const result = mergeResults(styles, MULTIPLY);\n      return result;\n    };\n  },\n  list: ({ forEach: items, children }, ctx) => t => {\n    const mapper = children[0];\n    const results = items.map(mapper);\n    return results.map(element => run(element, t, ctx));\n  }\n};\n\nexport function createAnimation(type, config, ...children) {\n  const props = { ...config, children };\n  return {\n    type: typeof type === \"string\" ? playhead[type] : type,\n    props\n  };\n}\n\nexport const Stagger = (props, ctx) => t => {\n  const targets = props.targets;\n  const filter = target => !props.filter || props.filter(target);\n  const interval =\n    targets.filter(filter).length < 2\n      ? 0\n      : props.interval / (targets.filter(filter).length - 1);\n  let i = 0;\n  return targets.map(target => {\n    // console.log(target, props.filter(target));\n    if (!filter(target)) {\n      return {};\n    }\n    const animation = (\n      <parallel>\n        <chain durations={[i * interval, 1 - props.interval]}>\n          <delay />\n          {props.children[0]}\n        </chain>\n      </parallel>\n    );\n    i++;\n    const result = run(animation, t, ctx);\n    // console.log(\"Stagger Result\", t, result);\n    return result;\n  });\n};\n\nexport function Context() {\n  throw Error(\"shouldnt run Context\");\n}\n\nexport function run(node: any, t: number, context = {}) {\n  if (node.type === Context) {\n    const { children, ...patch } = node.props;\n    const newContext = { ...context, ...patch };\n    return run(children[0], t, newContext);\n  }\n\n  const result = node.type(node.props, context);\n  if (result.type) {\n    return run(result, t, context);\n  } else {\n    return result(t);\n  }\n}\n","/* @jsx createAnimation */\nimport { createAnimation, run } from \"./playhead/playhead\";\nimport easing from \"./playhead/easing\";\n\nfunction FadeIn() {\n  return <tween from={{ opacity: 0 }} to={{ opacity: 1 }} />;\n}\nfunction FadeOut() {\n  return <tween from={{ opacity: 1 }} to={{ opacity: 0 }} />;\n}\n\nfunction FadeOutIn() {\n  return (\n    <chain durations={[0.5, 0.5]}>\n      <FadeOut />\n      <FadeIn />\n    </chain>\n  );\n}\n\nconst dx = 250;\nconst offOpacity = 0.3;\nconst outOpacity = 0;\nconst outHieght = 0;\nconst lineDurations = [0.2, 0.6, 0.2];\n\nconst SlideToLeft = () => (\n  <chain durations={lineDurations}>\n    <tween\n      from={{ x: 0, opacity: 1 }}\n      to={{ x: -dx, opacity: outOpacity }}\n      ease={easing.easeInQuad}\n    />\n    <delay />\n    <delay />\n  </chain>\n);\n\nconst SlideFromRight = () => (\n  <chain durations={lineDurations}>\n    <delay />\n    <delay />\n    <tween\n      from={{ x: dx, opacity: outOpacity }}\n      to={{ x: 0, opacity: 1 }}\n      ease={easing.easeOutQuad}\n    />\n  </chain>\n);\n\nfunction ShrinkHeight({ lineHeight }: { lineHeight?: number }) {\n  if (!lineHeight) {\n    return <step from={{ height: null }} to={{ height: 0 }} />;\n  }\n  return (\n    <tween\n      from={{ height: lineHeight }}\n      to={{ height: outHieght }}\n      ease={easing.easeInOutQuad}\n    />\n  );\n}\n\nfunction ExitLine({ lineHeight }: { lineHeight?: number }) {\n  return (\n    <chain durations={lineDurations}>\n      <delay />\n      <ShrinkHeight lineHeight={lineHeight} />\n    </chain>\n  );\n}\n\nfunction GrowHeight({ lineHeight }: { lineHeight?: number }) {\n  if (!lineHeight) {\n    return <step from={{ height: 0 }} to={{ height: null }} />;\n  }\n  return (\n    <tween\n      from={{ height: outHieght }}\n      to={{ height: lineHeight }}\n      ease={easing.easeInOutQuad}\n    />\n  );\n}\n\nfunction EnterLine({ lineHeight }: { lineHeight?: number }) {\n  return (\n    <chain durations={lineDurations}>\n      <delay />\n      <GrowHeight lineHeight={lineHeight} />\n      <delay />\n    </chain>\n  );\n}\n\nexport const fadeIn = (t: number) => run(<FadeIn />, t);\nexport const fadeOut = (t: number) => run(<FadeOut />, t);\nexport const fadeOutIn = (t: number) => run(<FadeOutIn />, t);\n\nexport function switchText<T>(\n  prev: Maybe<{ value: T }>,\n  next: Maybe<{ value: T }>,\n  t: number\n) {\n  // TODO merge with fadeBackground and fadeText\n  if (t < 0.5) {\n    return prev && prev.value;\n  } else {\n    return next && next.value;\n  }\n}\n\nfunction any<T>(prev: Maybe<T>, next: Maybe<T>): T {\n  return (prev || next) as T;\n}\n\nexport const exitLine = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n  return run(<ExitLine lineHeight={dimensions && dimensions.lineHeight} />, t);\n};\nexport const enterLine = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n  return run(<EnterLine lineHeight={dimensions && dimensions.lineHeight} />, t);\n};\nexport const slideToLeft = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  return run(<SlideToLeft />, t);\n};\nexport const slideFromRight = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  return run(<SlideFromRight />, t);\n};\nexport const focusLine = (\n  prev: Maybe<{ focus?: any }>,\n  next: Maybe<{ focus?: any }>,\n  t: number\n) => {\n  return run(\n    <tween\n      from={{ opacity: prev && prev.focus ? 1 : offOpacity }}\n      to={{ opacity: next && next.focus ? 1 : offOpacity }}\n    />,\n    t\n  );\n};\nexport const focusToken = (\n  prev: Maybe<{ focus?: any }>,\n  next: Maybe<{ focus?: any }>,\n  t: number\n) => {\n  const from = prev && prev.focus === false ? offOpacity : 1;\n  const to = next && next.focus === false ? offOpacity : 1;\n  return run(<tween from={{ opacity: from }} to={{ opacity: to }} />, t);\n};\n\nexport const tween = (from?: number, to?: number) => (\n  _prev: any,\n  _next: any,\n  t: number\n) => {\n  const result = run(\n    <tween\n      from={{ value: from || 0 }}\n      to={{ value: to || 0 }}\n      ease={easing.easeInOutQuad}\n    />,\n    t\n  );\n\n  return result.value;\n};\n\nexport const scaleToFocus = (\n  prev: Maybe<{ dimensions?: any }>,\n  next: Maybe<{ dimensions?: any }>,\n  t: number\n) => {\n  const dimensions = any(prev, next).dimensions;\n\n  if (!dimensions) {\n    return (_: number) => ({\n      scale: 1\n    });\n  }\n\n  const prevZoom = getZoom(prev);\n  const nextZoom = getZoom(next);\n\n  return run(\n    <tween\n      from={{\n        scale: prevZoom || nextZoom\n      }}\n      to={{\n        scale: nextZoom || prevZoom\n      }}\n      ease={easing.easeInOutQuad}\n    />,\n    t\n  );\n};\n\nexport const scrollToFocus = (\n  prevStep: Maybe<{ dimensions?: any; focusCenter: number }>,\n  nextStep: Maybe<{ dimensions?: any; focusCenter: number }>,\n  t: number\n) => {\n  const dimensions = any(prevStep, nextStep).dimensions;\n\n  if (!dimensions) {\n    return (_: number) => ({\n      scrollTop: 0\n    });\n  }\n\n  const prevCenter = prevStep\n    ? prevStep.focusCenter * dimensions.lineHeight\n    : 0;\n  const nextCenter = nextStep\n    ? nextStep.focusCenter * dimensions.lineHeight\n    : 0;\n\n  return run(\n    <chain durations={lineDurations}>\n      <delay />\n      <tween\n        from={{\n          scrollTop: prevCenter\n        }}\n        to={{\n          scrollTop: nextCenter\n        }}\n        ease={easing.easeInOutQuad}\n      />\n      <delay />\n    </chain>,\n    t\n  );\n};\n\nfunction getZoom(step: any): number | null {\n  if (!step) return null;\n\n  const {\n    paddingBottom,\n    paddingTop,\n    containerHeight,\n    containerWidth,\n    contentWidth,\n    lineHeight\n  } = step.dimensions;\n\n  const contentHeight = step.focusCount * lineHeight;\n  const availableHeight =\n    containerHeight - Math.max(paddingBottom, paddingTop) * 2;\n  const yZoom = availableHeight / contentHeight;\n\n  // if there are lines that are too long for the container\n  const xZoom = (0.9 * containerWidth) / contentWidth;\n\n  return Math.min(yZoom, 1, xZoom);\n  // return 1;\n}\n","export default {\n  colors: {\n    background: \"rgb(246, 248, 250)\",\n    text: \"rgb(57, 58, 52)\",\n    primary: \"rgb(0, 164, 219)\"\n  },\n  styles: {\n    CodeSurfer: {\n      pre: {\n        color: \"text\",\n        backgroundColor: \"background\"\n      },\n      code: {\n        color: \"text\",\n        backgroundColor: \"background\"\n      },\n      tokens: {\n        \"comment cdata doctype\": {\n          fontStyle: \"italic\"\n        },\n        \"builtin changed keyword punctuation operator tag deleted string attr-value char number inserted\": {\n          color: \"primary\"\n        }\n      },\n      title: {\n        backgroundColor: \"background\"\n      },\n      subtitle: {\n        color: \"#d6deeb\",\n        backgroundColor: \"rgba(10,10,10,0.9)\"\n      },\n      container: {}\n    }\n  }\n};\n","/** @jsx jsx */\nimport { ThemeProvider, jsx, useThemeUI, SxStyleProp, Theme } from \"theme-ui\";\nimport baseTheme from \"./themes/base\";\nimport React from \"react\";\n\ntype CodeSurferStyles = {\n  title: SxStyleProp;\n  subtitle: SxStyleProp;\n  code: SxStyleProp;\n  pre: SxStyleProp;\n  tokens: Record<string, SxStyleProp>;\n};\n\ntype CodeSurferTheme = Theme & { styles?: { CodeSurfer?: CodeSurferStyles } };\n\nfunction StylesProvider({\n  theme = {},\n  children\n}: {\n  theme?: CodeSurferTheme;\n  children: React.ReactNode;\n}) {\n  const { theme: outer } = useThemeUI();\n\n  const base = {\n    ...baseTheme,\n    ...outer,\n    styles: {\n      ...baseTheme.styles,\n      ...outer.styles\n    }\n  };\n\n  return (\n    <ThemeProvider theme={base}>\n      <ThemeProvider theme={theme}>{children}</ThemeProvider>\n    </ThemeProvider>\n  );\n}\n\nfunction useStyles(): CodeSurferStyles {\n  const { theme } = useThemeUI();\n  return (theme as any).styles.CodeSurfer;\n}\n\nfunction getClassFromTokenType(type) {\n  return \"token-\" + type;\n}\n\nfunction usePreStyle() {\n  const styles = useStyles();\n  const preSx = React.useMemo(() => {\n    const sx = {\n      ...styles.pre\n    };\n    Object.keys(styles.tokens).forEach(key => {\n      const classList = key\n        .split(/\\s/)\n        .map(type => \".\" + getClassFromTokenType(type))\n        .join(\", \");\n      sx[classList] = styles.tokens[key];\n    });\n    return sx;\n  }, [styles]);\n  return preSx;\n}\n\nconst baseTitle = {\n  position: \"absolute\" as \"absolute\",\n  top: 0,\n  width: \"100%\",\n  margin: 0,\n  padding: \"1em 0\",\n  textAlign: \"center\"\n};\n\nconst baseSubtitle = {\n  position: \"absolute\" as \"absolute\",\n  bottom: 0,\n  width: \"calc(100% - 2em)\",\n  boxSizing: \"border-box\" as \"border-box\",\n  margin: \"0.3em 1em\",\n  padding: \"0.5em\",\n  background: \"rgba(2,2,2,0.9)\",\n  textAlign: \"center\"\n};\n\nconst Styled = {\n  Code: props => <code {...props} sx={useStyles().code} />,\n  Pre: React.forwardRef(\n    (\n      props: React.PropsWithChildren<any>,\n      ref: React.MutableRefObject<HTMLPreElement>\n    ) => <pre {...props} sx={usePreStyle()} ref={ref} />\n  ),\n  Title: props => <h4 {...props} sx={{ ...baseTitle, ...useStyles().title }} />,\n  Subtitle: props => (\n    <p {...props} sx={{ ...baseSubtitle, ...useStyles().subtitle }} />\n  )\n};\n\nexport {\n  StylesProvider,\n  Styled,\n  getClassFromTokenType,\n  CodeSurferTheme,\n  CodeSurferStyles\n};\n","import React from \"react\";\nimport { useAnimationContext, Context } from \"./animation-context\";\nimport {\n  fadeIn,\n  fadeOutIn,\n  fadeOut,\n  exitLine,\n  enterLine,\n  scaleToFocus,\n  switchText,\n  focusLine,\n  focusToken,\n  scrollToFocus,\n  slideToLeft,\n  slideFromRight\n} from \"./animations\";\nimport { Step, Line as LineType, Token } from \"code-surfer-types\";\nimport { Animation, AnimationAndConfig } from \"playhead-types\";\nimport { Styled, getClassFromTokenType } from \"./styles\";\n\ntype ContainerProps = {\n  stepPlayhead: number;\n  dimensions?: any;\n  steps: Step[];\n};\n\nfunction CodeSurferContainer({\n  stepPlayhead,\n  dimensions,\n  steps\n}: ContainerProps) {\n  const ctx = useAnimationContext(steps, stepPlayhead);\n\n  return (\n    <div\n      className=\"cs-container\"\n      style={{\n        width: \"100%\",\n        height: dimensions ? dimensions.containerHeight : \"100%\",\n        maxHeight: \"100%\",\n        position: \"relative\"\n      }}\n    >\n      <CodeSurferContent dimensions={dimensions} ctx={ctx} />\n      <Title ctx={ctx.useSelect(step => step.title)} />\n      <Subtitle ctx={ctx.useSelect(step => step.subtitle)} />\n    </div>\n  );\n}\n\nconst heightChangingAnimations: AnimationAndConfig<any, any>[] = [\n  {\n    animation: slideToLeft,\n    when: (prev, next) => prev && !next,\n    stagger: 0.15\n  },\n  {\n    animation: slideFromRight,\n    when: (prev, next) => next && !prev,\n    stagger: 0.15\n  },\n  {\n    animation: exitLine,\n    when: (prev, next) => prev && !next\n  },\n  {\n    animation: enterLine,\n    when: (prev, next) => next && !prev\n  }\n];\n\nfunction CodeSurferContent({\n  dimensions,\n  ctx\n}: {\n  dimensions: any;\n  ctx: Context<Step>;\n}) {\n  const ref = React.useRef<HTMLPreElement | null>(null);\n\n  const { scrollTop } = ctx.animate(scrollToFocus);\n  React.useLayoutEffect(() => {\n    if (ref.current == null) return;\n    ref.current.scrollTop = scrollTop;\n  }, [scrollTop]);\n\n  const { scale } = ctx.animate(scaleToFocus);\n  const verticalOrigin = dimensions\n    ? dimensions.containerHeight / 2 + scrollTop\n    : 0;\n\n  const linesCtx = ctx.useSelectMany(step => step.lines);\n\n  return (\n    <Styled.Pre\n      className=\"cs-content\"\n      ref={ref}\n      style={{\n        margin: 0,\n        height: \"100%\",\n        overflow: \"hidden\"\n      }}\n    >\n      <Styled.Code\n        className=\"cs-scaled-content\"\n        style={{\n          display: \"block\",\n          height: dimensions ? dimensions.contentHeight : \"100%\",\n          width: dimensions && dimensions.contentWidth,\n          margin:\n            dimensions &&\n            `0 ${(dimensions.containerWidth - dimensions.contentWidth) / 2}px`,\n          transform: `scale(${scale})`,\n          transformOrigin: `center ${verticalOrigin}px`\n        }}\n      >\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n        {linesCtx.map((ctx, key) => (\n          <Line ctx={ctx} key={key} />\n        ))}\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n      </Styled.Code>\n    </Styled.Pre>\n  );\n}\n\nfunction Line({ ctx }: { ctx: Context<LineType> }) {\n  const lineStyle = ctx.animations([\n    ...heightChangingAnimations,\n    {\n      animation: focusLine\n    }\n  ]);\n\n  const { lineTokens, key, focusPerToken } = ctx.animate((prev, next) => {\n    const line = (prev || next) as LineType;\n    return {\n      lineTokens: line.tokens,\n      key: line.key,\n      focusPerToken:\n        (prev && prev.focusPerToken) || (next && next.focusPerToken)\n    };\n  });\n\n  let tokens: (Token & { animatedStyle: React.CSSProperties })[] = [];\n\n  let tokensCtx = ctx.useSelectMany(line => line.tokens);\n\n  if (focusPerToken) {\n    tokens = tokensCtx.map(tokenCtx => ({\n      ...tokenCtx.animate((prev, next) => (prev || next) as Token),\n      animatedStyle: tokenCtx.animate(focusToken)\n    }));\n  } else {\n    tokens = lineTokens.map(token => ({ ...token, animatedStyle: {} }));\n  }\n\n  return (\n    <div\n      style={{\n        overflow: \"hidden\",\n        // border: \"1px solid red\",\n        // boxSizing: \"border-box\",\n        ...lineStyle\n      }}\n    >\n      <div\n        style={{ display: \"inline-block\" }}\n        className={`cs-line cs-line-${key}`}\n      >\n        {tokens.map((token, i) => (\n          <span\n            key={i}\n            style={token.animatedStyle}\n            className={getClassFromTokenType(token.type)}\n          >\n            {token.content}\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction Title({ ctx }: { ctx: Context<{ value: string } | undefined> }) {\n  const text = ctx.animate(switchText);\n  const bgStyle = ctx.animate(fadeBackground);\n  const textStyle = ctx.animate(fadeText);\n\n  if (!text) return null;\n\n  return (\n    <Styled.Title className=\"cs-title\" style={bgStyle}>\n      <span style={textStyle}>{text}</span>\n    </Styled.Title>\n  );\n}\nfunction Subtitle({ ctx }: { ctx: Context<{ value: string } | undefined> }) {\n  const text = ctx.animate(switchText);\n  const bgStyle = ctx.animate(fadeBackground);\n  const textStyle = ctx.animate(fadeText);\n\n  if (!text) return null;\n\n  return (\n    <Styled.Subtitle className=\"cs-subtitle\" style={bgStyle}>\n      <span style={textStyle}>{text}</span>\n    </Styled.Subtitle>\n  );\n}\n\nconst fadeBackground: Animation<any, { opacity: number }> = (prev, next, t) => {\n  let opacity = 1;\n  if (!prev) {\n    opacity = t;\n  }\n  if (!next) {\n    opacity = 1 - t;\n  }\n  return { opacity };\n};\n\nconst fadeText: Animation<{ value: any } | undefined, { opacity: number }> = (\n  prev,\n  next,\n  t\n) => {\n  if (prev && next && prev.value !== next.value) {\n    return fadeOutIn(t);\n  }\n  if (!prev) {\n    return fadeIn(t);\n  }\n  if (!next) {\n    return fadeOut(t);\n  }\n  return { opacity: 1 };\n};\n\nexport default CodeSurferContainer;\n","import React from \"react\";\n\nexport default function useWindowResize(handler, deps) {\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", handler);\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n    };\n  }, deps);\n}\n","import React from \"react\";\nimport { Step } from \"code-surfer-types\";\nimport useWindowResize from \"./use-window-resize\";\n\nfunction useDimensions<T extends HTMLElement | null>(\n  ref: React.MutableRefObject<T>,\n  steps: Step[]\n) {\n  const [result, setResult] = React.useState<any | null>(null);\n\n  useWindowResize(() => setResult(null), [setResult]);\n\n  React.useLayoutEffect(() => {\n    if (!ref.current) return;\n    if (result) return;\n\n    const containers = ref.current.querySelectorAll(\n      \".cs-container\"\n    ) as NodeListOf<HTMLElement>;\n\n    const stepsDimensions = Array.from(containers).map((container, i) =>\n      getStepDimensions(container, steps[i])\n    );\n\n    const containerHeight = Math.max(\n      ...stepsDimensions.map(d => d.containerHeight)\n    );\n\n    const containerWidth = Math.max(\n      ...stepsDimensions.map(d => d.containerWidth)\n    );\n\n    const contentWidth = Math.max(...stepsDimensions.map(d => d.contentWidth));\n\n    const lineHeight = Math.max(...stepsDimensions.map(d => d.lineHeight));\n\n    setResult({\n      dimensions: {\n        lineHeight,\n        contentWidth,\n        containerHeight,\n        containerWidth\n      },\n      steps: steps.map((step, i) => ({\n        ...step,\n        lines: step.lines.map(l => ({\n          ...l,\n          dimensions: { lineHeight: stepsDimensions[i].lineHeight }\n        })),\n        dimensions: {\n          paddingTop: stepsDimensions[i].paddingTop,\n          paddingBottom: stepsDimensions[i].paddingBottom,\n          lineHeight: stepsDimensions[i].lineHeight,\n          contentWidth,\n          containerHeight,\n          containerWidth\n        }\n      }))\n    });\n  }, [result]);\n\n  return result || {};\n}\n\nfunction getStepDimensions(container: HTMLElement, step: Step) {\n  const longestLine = getLongestLine(step);\n  const longestLineKey = longestLine && longestLine.key;\n  const longestLineSpan = container.querySelector(`.cs-line-${longestLineKey}`);\n  const containerParent = container.parentElement as HTMLElement;\n  const title = container.querySelector(\".cs-title\") as HTMLElement;\n  const subtitle = container.querySelector(\".cs-subtitle\") as HTMLElement;\n\n  const lineCount = step.lines.length;\n  const heightOverflow =\n    containerParent.scrollHeight - containerParent.clientHeight;\n  const avaliableHeight = container.scrollHeight - heightOverflow;\n\n  const lineHeight = longestLineSpan ? longestLineSpan.clientHeight : 0;\n  const paddingTop = title ? outerHeight(title) : lineHeight;\n  const paddingBottom = subtitle ? outerHeight(subtitle) : lineHeight;\n\n  const codeHeight = lineCount * lineHeight * 2;\n  // const maxContentHeight = codeHeight + paddingTop + paddingBottom;\n  // const containerHeight = Math.min(maxContentHeight, avaliableHeight);\n  const containerHeight = avaliableHeight;\n  const containerWidth = container.clientWidth;\n  const contentHeight = codeHeight + containerHeight;\n\n  const contentWidth = longestLineSpan ? longestLineSpan.clientWidth : 0;\n\n  return {\n    lineHeight,\n    contentHeight,\n    contentWidth,\n    paddingTop,\n    paddingBottom,\n    containerHeight,\n    containerWidth\n  };\n}\n\nfunction outerHeight(element: HTMLElement) {\n  var styles = window.getComputedStyle(element);\n  var margin =\n    parseFloat(styles[\"marginTop\"] || \"0\") +\n    parseFloat(styles[\"marginBottom\"] || \"0\");\n  return element.offsetHeight + margin;\n}\n\nfunction getLongestLine(step: Step) {\n  if (!step || step.lines.length === 0) {\n    return null;\n  }\n  return step.lines.reduce((a, b) =>\n    a.content.length > b.content.length ? a : b\n  );\n}\n\nexport default useDimensions;\n","import { StyleItem } from \"code-surfer-types\";\nimport { CodeSurferTheme, CodeSurferStyles } from \"../styles\";\n\ntype PrismTheme = {\n  plain: { color: string; backgroundColor: string };\n  styles: StyleItem[];\n};\n\nexport function makeTheme(\n  prismTheme: PrismTheme,\n  override: Partial<CodeSurferStyles> = {}\n): any {\n  const tokens = {};\n  prismTheme.styles.forEach(s => {\n    tokens[s.types.join(\" \")] = s.style;\n  });\n\n  return {\n    styles: {\n      CodeSurfer: {\n        tokens,\n        title: {\n          backgroundColor: prismTheme.plain.backgroundColor\n        },\n        subtitle: {\n          color: \"#d6deeb\",\n          backgroundColor: \"rgba(10,10,10,0.9)\"\n        },\n        pre: {\n          color: prismTheme.plain.color,\n          backgroundColor: prismTheme.plain.backgroundColor\n        },\n        code: {\n          color: prismTheme.plain.color,\n          backgroundColor: prismTheme.plain.backgroundColor\n        },\n        ...override\n      }\n    }\n  };\n}\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#393A34\",\n    backgroundColor: \"#f6f8fa\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\"],\n      style: {\n        color: \"#999988\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"string\", \"attr-value\"],\n      style: {\n        color: \"#e3116c\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"operator\"],\n      style: {\n        color: \"#393A34\"\n      }\n    },\n    {\n      types: [\n        \"entity\",\n        \"url\",\n        \"symbol\",\n        \"number\",\n        \"boolean\",\n        \"variable\",\n        \"constant\",\n        \"property\",\n        \"regex\",\n        \"inserted\"\n      ],\n      style: {\n        color: \"#36acaa\"\n      }\n    },\n    {\n      types: [\"atrule\", \"keyword\", \"attr-name\", \"selector\"],\n      style: {\n        color: \"#00a4db\"\n      }\n    },\n    {\n      types: [\"function\", \"deleted\", \"tag\"],\n      style: {\n        color: \"#d73a49\"\n      }\n    },\n    {\n      types: [\"function-variable\"],\n      style: {\n        color: \"#6f42c1\"\n      }\n    },\n    {\n      types: [\"tag\", \"selector\"],\n      style: {\n        color: \"#00009f\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#F8F8F2\",\n    backgroundColor: \"#282A36\"\n  },\n  styles: [\n    {\n      types: [\"prolog\", \"constant\", \"builtin\"],\n      style: {\n        color: \"rgb(189, 147, 249)\"\n      }\n    },\n    {\n      types: [\"inserted\", \"function\"],\n      style: {\n        color: \"rgb(80, 250, 123)\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgb(255, 85, 85)\"\n      }\n    },\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(255, 184, 108)\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"symbol\"],\n      style: {\n        color: \"rgb(248, 248, 242)\"\n      }\n    },\n    {\n      types: [\"string\", \"char\", \"tag\", \"selector\"],\n      style: {\n        color: \"rgb(255, 121, 198)\"\n      }\n    },\n    {\n      types: [\"keyword\", \"variable\"],\n      style: {\n        color: \"rgb(189, 147, 249)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(98, 114, 164)\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"rgb(241, 250, 140)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#2a2734\",\n    color: \"#9a86fd\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\", \"punctuation\"],\n      style: {\n        color: \"#6c6783\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"number\"],\n      style: {\n        color: \"#e09142\"\n      }\n    },\n    {\n      types: [\"property\", \"function\"],\n      style: {\n        color: \"#9a86fd\"\n      }\n    },\n    {\n      types: [\"tag-id\", \"selector\", \"atrule-id\"],\n      style: {\n        color: \"#eeebff\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"#c4b9fe\"\n      }\n    },\n    {\n      types: [\n        \"boolean\",\n        \"string\",\n        \"entity\",\n        \"url\",\n        \"attr-value\",\n        \"keyword\",\n        \"control\",\n        \"directive\",\n        \"unit\",\n        \"statement\",\n        \"regex\",\n        \"at-rule\",\n        \"placeholder\",\n        \"variable\"\n      ],\n      style: {\n        color: \"#ffcc99\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        textDecorationLine: \"line-through\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        textDecorationLine: \"underline\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"important\", \"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        color: \"#c4b9fe\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#faf8f5\",\n    color: \"#728fcb\"\n  },\n  styles: [\n    {\n      types: [\"comment\", \"prolog\", \"doctype\", \"cdata\", \"punctuation\"],\n      style: {\n        color: \"#b6ad9a\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"number\"],\n      style: {\n        color: \"#063289\"\n      }\n    },\n    {\n      types: [\"property\", \"function\"],\n      style: {\n        color: \"#b29762\"\n      }\n    },\n    {\n      types: [\"tag-id\", \"selector\", \"atrule-id\"],\n      style: {\n        color: \"#2d2006\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"#896724\"\n      }\n    },\n    {\n      types: [\n        \"boolean\",\n        \"string\",\n        \"entity\",\n        \"url\",\n        \"attr-value\",\n        \"keyword\",\n        \"control\",\n        \"directive\",\n        \"unit\",\n        \"statement\",\n        \"regex\",\n        \"at-rule\"\n      ],\n      style: {\n        color: \"#728fcb\"\n      }\n    },\n    {\n      types: [\"placeholder\", \"variable\"],\n      style: {\n        color: \"#93abdc\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        textDecorationLine: \"line-through\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        textDecorationLine: \"underline\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"important\", \"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        color: \"#896724\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#d6deeb\",\n    backgroundColor: \"#011627\"\n  },\n  styles: [\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(162, 191, 252)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgba(239, 83, 80, 0.56)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"inserted\", \"attr-name\"],\n      style: {\n        color: \"rgb(173, 219, 103)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(99, 119, 119)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"string\", \"url\"],\n      style: {\n        color: \"rgb(173, 219, 103)\"\n      }\n    },\n    {\n      types: [\"variable\"],\n      style: {\n        color: \"rgb(214, 222, 235)\"\n      }\n    },\n    {\n      types: [\"number\"],\n      style: {\n        color: \"rgb(247, 140, 108)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"char\", \"constant\", \"function\"],\n      style: {\n        color: \"rgb(130, 170, 255)\"\n      }\n    },\n    {\n      // This was manually added after the auto-generation\n      // so that punctuations are not italicised\n      types: [\"punctuation\"],\n      style: {\n        color: \"rgb(199, 146, 234)\"\n      }\n    },\n    {\n      types: [\"selector\", \"doctype\"],\n      style: {\n        color: \"rgb(199, 146, 234)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"rgb(255, 203, 139)\"\n      }\n    },\n    {\n      types: [\"tag\", \"operator\", \"keyword\"],\n      style: {\n        color: \"rgb(127, 219, 202)\"\n      }\n    },\n    {\n      types: [\"boolean\"],\n      style: {\n        color: \"rgb(255, 88, 116)\"\n      }\n    },\n    {\n      types: [\"property\"],\n      style: {\n        color: \"rgb(128, 203, 196)\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        color: \"rgb(178, 204, 214)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme, {\n  title: { background: \"rgba(1, 22, 39, 0.8)\" }\n});\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst colors = {\n  char: \"#D8DEE9\",\n  comment: \"#999999\",\n  keyword: \"#c5a5c5\",\n  primitive: \"#5a9bcf\",\n  string: \"#8dc891\",\n  variable: \"#d7deea\",\n  boolean: \"#ff8b50\",\n  punctuation: \"#5FB3B3\",\n  tag: \"#fc929e\",\n  function: \"#79b6f2\",\n  className: \"#FAC863\",\n  method: \"#6699CC\",\n  operator: \"#fc929e\"\n};\n\nconst prismTheme = {\n  plain: {\n    backgroundColor: \"#282c34\",\n    color: \"#ffffff\"\n  },\n  styles: [\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: colors.keyword\n      }\n    },\n    {\n      types: [\"attr-value\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"comment\", \"block-comment\", \"prolog\", \"doctype\", \"cdata\"],\n      style: {\n        color: colors.comment\n      }\n    },\n    {\n      types: [\n        \"property\",\n        \"number\",\n        \"function-name\",\n        \"constant\",\n        \"symbol\",\n        \"deleted\"\n      ],\n      style: {\n        color: colors.primitive\n      }\n    },\n    {\n      types: [\"boolean\"],\n      style: {\n        color: colors.boolean\n      }\n    },\n    {\n      types: [\"tag\"],\n      style: {\n        color: colors.tag\n      }\n    },\n    {\n      types: [\"string\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"punctuation\"],\n      style: {\n        color: colors.string\n      }\n    },\n    {\n      types: [\"selector\", \"char\", \"builtin\", \"inserted\"],\n      style: {\n        color: colors.char\n      }\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: colors.function\n      }\n    },\n    {\n      types: [\"operator\", \"entity\", \"url\", \"variable\"],\n      style: {\n        color: colors.variable\n      }\n    },\n    {\n      types: [\"keyword\"],\n      style: {\n        color: colors.keyword\n      }\n    },\n    {\n      types: [\"at-rule\", \"class-name\"],\n      style: {\n        color: colors.className\n      }\n    },\n    {\n      types: [\"important\"],\n      style: {\n        fontWeight: 400\n      }\n    },\n    {\n      types: [\"bold\"],\n      style: {\n        fontWeight: \"bold\" as \"bold\"\n      }\n    },\n    {\n      types: [\"italic\"],\n      style: {\n        fontStyle: \"italic\" as \"italic\"\n      }\n    },\n    {\n      types: [\"namespace\"],\n      style: {\n        opacity: 0.7\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#9EFEFF\",\n    backgroundColor: \"#2D2A55\"\n  },\n  styles: [\n    {\n      types: [\"changed\"],\n      style: {\n        color: \"rgb(255, 238, 128)\"\n      }\n    },\n    {\n      types: [\"deleted\"],\n      style: {\n        color: \"rgba(239, 83, 80, 0.56)\"\n      }\n    },\n    {\n      types: [\"inserted\"],\n      style: {\n        color: \"rgb(173, 219, 103)\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(179, 98, 255)\",\n        fontStyle: \"italic\"\n      }\n    },\n    {\n      types: [\"punctuation\"],\n      style: {\n        color: \"rgb(255, 255, 255)\"\n      }\n    },\n    {\n      types: [\"constant\"],\n      style: {\n        color: \"rgb(255, 98, 140)\"\n      }\n    },\n    {\n      types: [\"string\", \"url\"],\n      style: {\n        color: \"rgb(165, 255, 144)\"\n      }\n    },\n    {\n      types: [\"variable\"],\n      style: {\n        color: \"rgb(255, 238, 128)\"\n      }\n    },\n    {\n      types: [\"number\", \"boolean\"],\n      style: {\n        color: \"rgb(255, 98, 140)\"\n      }\n    },\n    {\n      types: [\"attr-name\"],\n      style: {\n        color: \"rgb(255, 180, 84)\"\n      }\n    },\n    {\n      types: [\n        \"keyword\",\n        \"operator\",\n        \"property\",\n        \"namespace\",\n        \"tag\",\n        \"selector\",\n        \"doctype\"\n      ],\n      style: {\n        color: \"rgb(255, 157, 0)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"char\", \"constant\", \"function\", \"class-name\"],\n      style: {\n        color: \"rgb(250, 208, 0)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#282a2e\",\n    backgroundColor: \"#ffffff\"\n  },\n  styles: [\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(197, 200, 198)\"\n      }\n    },\n    {\n      types: [\"string\", \"number\", \"builtin\", \"variable\"],\n      style: {\n        color: \"rgb(150, 152, 150)\"\n      }\n    },\n    {\n      types: [\"class-name\", \"function\", \"tag\", \"attr-name\"],\n      style: {\n        color: \"rgb(40, 42, 46)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import { makeTheme } from \"./utils\";\n\n// From: https://github.com/FormidableLabs/prism-react-renderer/blob/master/themes/\n\nconst prismTheme = {\n  plain: {\n    color: \"#9CDCFE\",\n    backgroundColor: \"#1E1E1E\"\n  },\n  styles: [\n    {\n      types: [\"prolog\"],\n      style: {\n        color: \"rgb(0, 0, 128)\"\n      }\n    },\n    {\n      types: [\"comment\"],\n      style: {\n        color: \"rgb(106, 153, 85)\"\n      }\n    },\n    {\n      types: [\"builtin\", \"changed\", \"keyword\"],\n      style: {\n        color: \"rgb(86, 156, 214)\"\n      }\n    },\n    {\n      types: [\"number\", \"inserted\"],\n      style: {\n        color: \"rgb(181, 206, 168)\"\n      }\n    },\n    {\n      types: [\"constant\"],\n      style: {\n        color: \"rgb(100, 102, 149)\"\n      }\n    },\n    {\n      types: [\"attr-name\", \"variable\"],\n      style: {\n        color: \"rgb(156, 220, 254)\"\n      }\n    },\n    {\n      types: [\"deleted\", \"string\", \"attr-value\"],\n      style: {\n        color: \"rgb(206, 145, 120)\"\n      }\n    },\n    {\n      types: [\"selector\"],\n      style: {\n        color: \"rgb(215, 186, 125)\"\n      }\n    },\n    {\n      // Fix tag color\n      types: [\"tag\"],\n      style: {\n        color: \"rgb(78, 201, 176)\"\n      }\n    },\n    {\n      // Fix tag color for HTML\n      types: [\"tag\"],\n      languages: [\"markup\"],\n      style: {\n        color: \"rgb(86, 156, 214)\"\n      }\n    },\n    {\n      types: [\"punctuation\", \"operator\"],\n      style: {\n        color: \"rgb(212, 212, 212)\"\n      }\n    },\n    {\n      // Fix punctuation color for HTML\n      types: [\"punctuation\"],\n      languages: [\"markup\"],\n      style: {\n        color: \"#808080\"\n      }\n    },\n    {\n      types: [\"function\"],\n      style: {\n        color: \"rgb(220, 220, 170)\"\n      }\n    },\n    {\n      types: [\"class-name\"],\n      style: {\n        color: \"rgb(78, 201, 176)\"\n      }\n    },\n    {\n      types: [\"char\"],\n      style: {\n        color: \"rgb(209, 105, 105)\"\n      }\n    }\n  ]\n};\n\nconst theme = makeTheme(prismTheme);\n\nexport { theme };\n","import React from \"react\";\nimport { InputStep, Step } from \"code-surfer-types\";\nimport { parseSteps } from \"./parse-steps\";\nimport Frame from \"./frame\";\nimport useDimensions from \"./dimensions\";\nimport { StylesProvider, CodeSurferTheme } from \"./styles\";\n\nimport \"./default-syntaxes\";\n\ntype CodeSurferProps = {\n  steps: InputStep[];\n  progress: number; // float between [0, steps.lenght - 1]\n  theme?: CodeSurferTheme;\n};\n\nfunction getFakeSteps(parsedSteps: Step[]) {\n  const fakeSteps = parsedSteps.map(step => {\n    const fakeStep: Step = {\n      ...step,\n      lines: step.lines.map(line => ({\n        ...line,\n        tokens: line.tokens && [line.tokens[0]]\n      }))\n    };\n\n    fakeStep.lines[0] = step.lines.reduce((a, b) =>\n      a.content.length > b.content.length ? a : b\n    );\n    return fakeStep;\n  });\n  fakeSteps[0] = parsedSteps[0];\n  return fakeSteps;\n}\n\nfunction CodeSurfer({ progress, steps: inputSteps }: CodeSurferProps) {\n  const [steps, fakeSteps] = React.useMemo(() => {\n    const parsedSteps = parseSteps(\n      inputSteps,\n      inputSteps[0].lang || \"javascript\"\n    );\n    const fakeSteps = getFakeSteps(parsedSteps);\n    return [parsedSteps, fakeSteps];\n  }, [inputSteps]);\n\n  const ref = React.useRef<HTMLDivElement>(null);\n  const { dimensions, steps: stepsWithDimensions } = useDimensions(ref, steps);\n  if (!dimensions) {\n    return (\n      <div\n        ref={ref}\n        style={{ overflow: \"auto\", height: \"100%\", width: \"100%\" }}\n      >\n        {fakeSteps.map((_step, i) => (\n          <div\n            key={i}\n            style={{\n              overflow: \"auto\",\n              height: \"100%\",\n              width: \"100%\"\n            }}\n          >\n            <Frame steps={fakeSteps} stepPlayhead={i} />\n          </div>\n        ))}\n      </div>\n    );\n  } else {\n    return (\n      <div\n        style={{ height: \"100%\", width: \"100%\", overflow: \"auto\" }}\n        ref={ref}\n      >\n        <Frame\n          steps={stepsWithDimensions}\n          stepPlayhead={progress}\n          dimensions={dimensions}\n        />\n      </div>\n    );\n  }\n}\n\nfunction CodeSurferWrapper({ theme, steps, ...props }: CodeSurferProps) {\n  const [wait, setWait] = React.useState(steps.length > 3);\n\n  React.useEffect(() => {\n    if (!wait) return;\n    setWait(false);\n  }, []);\n\n  if (wait) return null;\n\n  return (\n    <StylesProvider theme={theme}>\n      <CodeSurfer steps={steps} {...props} />\n    </StylesProvider>\n  );\n}\n\nexport default CodeSurferWrapper;\nexport * from \"./themes\";\n"],"names":["grammarNotFound","lang","element","React","ErrorBox","header","body","Fragment","Mark","href","style","color","invalidFocusNumber","n","withFocusString","focusString","withStepIndex","stepIndex","StepErrorHeader","invalidLineOrColumnNumber","background","border","padding","maxWidth","margin","fontFamily","fontSize","ordinal","children","fontWeight","i","j","k","newlineRe","flattenTokens","tokens","flatList","forEach","token","type","content","Array","isArray","push","wrapToken","prismToken","parentType","tokenizeStrings","prismTokens","map","tokenize","code","language","grammar","Prism","languages","nestedTokens","currentLine","lines","contentLines","split","firstContent","shift","undefined","myDiff","oldCode","newCode","changes","diffLines","oldIndex","value","count","removed","added","lastLine","pop","result","insert","array","index","elements","splice","slideDiff","codes","slideIndex","prevLines","filter","l","slides","includes","prevCode","currCode","change","prevLine","addAtIndex","indexOf","addLines","tokenLines","currLines","line","parseLines","length","getSlides","_","lineIndex","isNew","show","key","getCodes","rawSteps","s","applyPatch","parseFocus","focus","Error","parts","parsePart","Map","flat","error","part","columnsMatch","match","columns","columnsList","expandString","Number","columnIndexes","c","lineNumber","start","end","isNaturalNumber","errors","startNumber","list","toString","n1","Math","abs","n2","parseInt","isNaN","parseSteps","stepsLines","reverse","steps","step","parseStep","e","focusMap","has","columnFocus","get","focusPerToken","splitTokensToColumns","setTokenFocus","rest","getDefaultFocus","focusIndexes","from","keys","focusStart","min","apply","focusEnd","max","focusCenter","focusCount","indexes","tokenArray","chars","char","focusColumns","Tuple","prev","next","spread","select","selector","newPrev","newNext","selectMany","ArrayTuple","_key","_mapper","_getChildrenMap","_dict","maybePrevs","maybeNexts","prevs","nexts","unsortedMap","set","sortedKeys","sort","a","b","childrenMap","mapper","tuple","Context","t","parent","useSelect","newTuple","useMemo","useSelectMany","ListContext","animate","animation","config","when","staggeredT","stagger","items","childCtx","prevChild","nextChild","isSelected","isThisChild","x","N","currentIndex","findIndex","duration","tick","animations","results","merge","childTuple","useAnimationContext","playhead","floor","MULTIPLY","composite","firstResult","mergeArrays","mergeObjects","merged","Object","assign","opacities","opacity","reduce","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","mergeResults","always","props","context","to","tween","ease","easing","chain","ctx","fns","durations","run","lowerDuration","fn","thisDuration","upperDuration","innerT","delay","parallel","styles","createAnimation","node","patch","newContext","FadeIn","FadeOut","FadeOutIn","dx","offOpacity","outOpacity","outHieght","lineDurations","SlideToLeft","SlideFromRight","ShrinkHeight","lineHeight","height","ExitLine","GrowHeight","EnterLine","fadeIn","fadeOut","fadeOutIn","switchText","any","exitLine","dimensions","enterLine","slideToLeft","slideFromRight","focusLine","focusToken","scaleToFocus","scale","prevZoom","getZoom","nextZoom","scrollToFocus","prevStep","nextStep","scrollTop","prevCenter","nextCenter","paddingBottom","paddingTop","containerHeight","containerWidth","contentWidth","contentHeight","availableHeight","yZoom","xZoom","colors","text","primary","CodeSurfer","pre","backgroundColor","fontStyle","title","subtitle","container","StylesProvider","theme","useThemeUI","outer","base","baseTheme","jsx","ThemeProvider","useStyles","getClassFromTokenType","usePreStyle","preSx","sx","classList","join","baseTitle","position","top","width","textAlign","baseSubtitle","bottom","boxSizing","Styled","Code","Pre","forwardRef","ref","Title","Subtitle","CodeSurferContainer","stepPlayhead","className","maxHeight","CodeSurferContent","heightChangingAnimations","useRef","useLayoutEffect","current","verticalOrigin","linesCtx","overflow","display","transform","transformOrigin","Line","lineStyle","lineTokens","tokensCtx","tokenCtx","animatedStyle","bgStyle","fadeBackground","textStyle","fadeText","useWindowResize","handler","deps","useEffect","window","addEventListener","removeEventListener","useDimensions","useState","setResult","containers","querySelectorAll","stepsDimensions","getStepDimensions","d","longestLine","getLongestLine","longestLineKey","longestLineSpan","querySelector","containerParent","parentElement","lineCount","heightOverflow","scrollHeight","clientHeight","avaliableHeight","outerHeight","codeHeight","clientWidth","getComputedStyle","parseFloat","offsetHeight","makeTheme","prismTheme","override","types","plain","textDecorationLine","comment","keyword","primitive","string","variable","punctuation","tag","method","operator","getFakeSteps","parsedSteps","fakeSteps","fakeStep","progress","inputSteps","stepsWithDimensions","_step","Frame","CodeSurferWrapper","wait","setWait"],"mappings":"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"}