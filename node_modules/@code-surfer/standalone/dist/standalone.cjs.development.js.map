{"version":3,"file":"standalone.cjs.development.js","sources":["../src/errors.tsx","../src/use-window-resize.ts","../src/dimensions.ts","../src/easing.ts","../src/animation.ts","../src/lines.tsx","../src/tuple.ts","../src/frame.tsx","../src/code-surfer.tsx","../src/index.tsx"],"sourcesContent":["import React from \"react\";\n\ntype UnknownErrorProps = {\n  error: { toString: () => string };\n};\n\nexport function UnknownError({ error }: UnknownErrorProps) {\n  // TODO link to create issue\n  return <ErrorBox header=\"Oops, there's a problem\" body={error.toString()} />;\n}\n\nexport function grammarNotFound({ lang }: { lang: string }) {\n  return {\n    element: (\n      <ErrorBox\n        header=\"Oops, there's a problem\"\n        body={\n          <React.Fragment>\n            Syntax highlighter for <Mark>\"{lang}\"</Mark> not found.\n            <p>\n              You can try importing it from prismjs with: <br />\n              <Mark>import \"prismjs/components/prism-{lang}\"</Mark>\n            </p>\n            (See{\" \"}\n            <a\n              href=\"https://prismjs.com/#supported-languages\"\n              style={{ color: \"grey\" }}\n            >\n              all the supported languages\n            </a>\n            )\n          </React.Fragment>\n        }\n      />\n    )\n  };\n}\n\nexport function invalidFocusNumber(n: string) {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                <Mark>\"{n}\"</Mark> isn't a valid number{\" \"}\n                {n != focusString && <Mark> (in \"{focusString}\")</Mark>}\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\nexport function invalidLineOrColumnNumber() {\n  return {\n    withFocusString: (focusString: string) => ({\n      withStepIndex: (stepIndex: number) => ({\n        element: (\n          <ErrorBox\n            header={<StepErrorHeader stepIndex={stepIndex} />}\n            body={\n              <React.Fragment>\n                Are you using \"0\" as a line or column number{\" \"}\n                <Mark>in \"{focusString}\"</Mark>?\n                <br />\n                (Line and column numbers should start at 1, not 0) <br />\n              </React.Fragment>\n            }\n          />\n        )\n      })\n    })\n  };\n}\n\ntype ErrorBoxProps = {\n  header: React.ReactNode;\n  body: React.ReactNode;\n};\n\nfunction ErrorBox({ header, body }: ErrorBoxProps) {\n  return (\n    <div\n      style={{\n        background: \"#290000\",\n        color: \"#b96f70\",\n        border: \"2px solid #b96f70\",\n        padding: \"10px 30px\",\n        maxWidth: \"90vw\",\n        margin: \"0 auto\",\n        fontFamily: \"monospace\",\n        fontSize: \"1rem\"\n      }}\n    >\n      <h3>{header}</h3>\n      <p>{body}</p>\n    </div>\n  );\n}\n\nfunction StepErrorHeader({ stepIndex }: { stepIndex: number }) {\n  return (\n    <React.Fragment>\n      Oops, there's a problem with the{\" \"}\n      <Mark>\n        {stepIndex + 1}\n        <sup>{ordinal(stepIndex + 1)}</sup> step\n      </Mark>\n    </React.Fragment>\n  );\n}\n\nfunction Mark({ children }: { children: React.ReactNode }) {\n  return (\n    <mark style={{ background: \"none\", color: \"pink\", fontWeight: \"bolder\" }}>\n      {children}\n    </mark>\n  );\n}\n\nfunction ordinal(i: number) {\n  var j = i % 10,\n    k = i % 100;\n  if (j == 1 && k != 11) {\n    return \"st\";\n  }\n  if (j == 2 && k != 12) {\n    return \"nd\";\n  }\n  if (j == 3 && k != 13) {\n    return \"rd\";\n  }\n  return \"th\";\n}\n","import React from \"react\";\n\n//  addEventListener<K extends keyof WindowEventMap>(type: K, listener: (this: Window, ev: WindowEventMap[K]) => any, options?: boolean | AddEventListenerOptions): void;\n// type addEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions): void;\n\nexport default function useWindowResize(\n  handler: (this: Window, ev: WindowEventMap[\"resize\"]) => any,\n  deps: any[]\n) {\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", handler);\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n    };\n  }, deps);\n}\n","import React from \"react\";\nimport { Step, Dimensions } from \"code-surfer-types\";\nimport useWindowResize from \"./use-window-resize\";\n\ntype DimensionsResult = { steps?: Step[]; dimensions?: Dimensions };\n\nfunction useDimensions<T extends HTMLElement | null>(\n  ref: React.MutableRefObject<T>,\n  steps: Step[]\n): DimensionsResult {\n  const [result, setResult] = React.useState<DimensionsResult | null>(null);\n\n  // TODO reset only if container size changed\n  useWindowResize(() => setResult(null), [setResult]);\n\n  React.useLayoutEffect(() => {\n    if (!ref.current) return;\n    if (result) return;\n\n    const containers = ref.current.querySelectorAll(\n      \".cs-container\"\n    ) as NodeListOf<HTMLElement>;\n\n    const stepsDimensions = Array.from(containers).map((container, i) =>\n      getStepDimensions(container, steps[i])\n    );\n\n    const containerHeight = Math.max(\n      ...stepsDimensions.map(d => d.containerHeight)\n    );\n\n    const containerWidth = Math.max(\n      ...stepsDimensions.map(d => d.containerWidth)\n    );\n\n    const contentWidth = Math.max(...stepsDimensions.map(d => d.contentWidth));\n\n    const lineHeight = Math.max(...stepsDimensions.map(d => d.lineHeight));\n\n    setResult({\n      dimensions: {\n        lineHeight,\n        contentWidth,\n        containerHeight,\n        containerWidth,\n        // TODO set or remove\n        contentHeight: undefined\n      },\n      steps: steps.map((step, i) => ({\n        ...step,\n        dimensions: {\n          paddingTop: stepsDimensions[i].paddingTop,\n          paddingBottom: stepsDimensions[i].paddingBottom\n        }\n      }))\n    });\n  }, [result]);\n\n  return result || {};\n}\n\nfunction getStepDimensions(container: HTMLElement, step: Step) {\n  const longestLineKey = step.lines[step.longestLineIndex];\n  const longestLineSpan = container.querySelector(`.cs-line-${longestLineKey}`);\n  const containerParent = container.parentElement as HTMLElement;\n  const title = container.querySelector(\".cs-title\") as HTMLElement;\n  const subtitle = container.querySelector(\".cs-subtitle\") as HTMLElement;\n\n  const lineCount = step.lines.length;\n  const heightOverflow =\n    containerParent.scrollHeight - containerParent.clientHeight;\n  const avaliableHeight = container.scrollHeight - heightOverflow;\n\n  const lineHeight = longestLineSpan ? longestLineSpan.clientHeight : 0;\n  const paddingTop = title ? outerHeight(title) : lineHeight;\n  const paddingBottom = subtitle ? outerHeight(subtitle) : lineHeight;\n\n  const codeHeight = lineCount * lineHeight * 2;\n  // const maxContentHeight = codeHeight + paddingTop + paddingBottom;\n  // const containerHeight = Math.min(maxContentHeight, avaliableHeight);\n  const containerHeight = avaliableHeight;\n  const containerWidth = container.clientWidth;\n  const contentHeight = codeHeight + containerHeight;\n\n  const contentWidth = longestLineSpan ? longestLineSpan.clientWidth : 0;\n\n  return {\n    lineHeight,\n    contentHeight,\n    contentWidth,\n    paddingTop,\n    paddingBottom,\n    containerHeight,\n    containerWidth\n  };\n}\n\nfunction outerHeight(element: HTMLElement) {\n  var styles = window.getComputedStyle(element);\n  var margin =\n    parseFloat(styles[\"marginTop\"] || \"0\") +\n    parseFloat(styles[\"marginBottom\"] || \"0\");\n  return element.offsetHeight + margin;\n}\n\nexport default useDimensions;\n","export type Easing = (t: number) => number;\n\nexport default {\n  // no easing, no acceleration\n  linear: function(t: number) {\n    return t;\n  },\n  // accelerating from zero velocity\n  easeInQuad: function(t: number) {\n    return t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuad: function(t: number) {\n    return t * (2 - t);\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function(t: number) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n  // accelerating from zero velocity\n  easeInCubic: function(t: number) {\n    return t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutCubic: function(t: number) {\n    return --t * t * t + 1;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function(t: number) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n  // accelerating from zero velocity\n  easeInQuart: function(t: number) {\n    return t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuart: function(t: number) {\n    return 1 - --t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function(t: number) {\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n  },\n  // accelerating from zero velocity\n  easeInQuint: function(t: number) {\n    return t * t * t * t * t;\n  },\n  // decelerating to zero velocity\n  easeOutQuint: function(t: number) {\n    return 1 + --t * t * t * t * t;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function(t: number) {\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n  }\n};\n","import { CSSProperties } from \"react\";\nimport easing, { Easing } from \"./easing\";\nimport { Tuple } from \"./tuple\";\nimport { Step, Dimensions } from \"code-surfer-types\";\n\nconst distx = 250;\nconst outHeight = 0;\n\nconst [EXIT, SCROLL, ENTER] = [0.25, 0.75, 1];\n\ntype Animation<T> = (t: number) => T;\nexport type StyleAnimation = (t: number) => CSSProperties;\n\nexport function emptyStyle() {\n  return {} as CSSProperties;\n}\n\nexport function exitLine(\n  fromOpacity: number,\n  toOpacity: number,\n  staggerIndex: number,\n  staggerLength: number,\n  lineHeight: number = 100\n): StyleAnimation {\n  return chain(\n    [\n      [\n        EXIT,\n        stagger(\n          slideToLeft(fromOpacity, toOpacity),\n          staggerIndex,\n          staggerLength\n        )\n      ],\n      [SCROLL, shrinkHeight(lineHeight)],\n      [ENTER, undefined]\n    ],\n    {\n      height: lineHeight\n    }\n  );\n}\n\nexport function enterLine(\n  fromOpacity: number,\n  toOpacity: number,\n  staggerIndex: number,\n  staggerLength: number,\n  lineHeight: number = 100\n) {\n  return chain(\n    [\n      [EXIT, undefined],\n      [SCROLL, growHeight(lineHeight)],\n      [\n        ENTER,\n        stagger(\n          slideFromRight(fromOpacity, toOpacity),\n          staggerIndex,\n          staggerLength\n        )\n      ]\n    ],\n    {\n      transform: `translateX(${distx}px)`,\n      height: 0,\n      opacity: 0\n    }\n  );\n}\n\nexport function focus(fromOpacity: number, toOpacity: number) {\n  return (t: number) => ({ opacity: tween(fromOpacity, toOpacity, t) });\n}\n\nexport function unfocus(fromOpacity: number, toOpacity: number) {\n  return (t: number) => ({ opacity: tween(fromOpacity, toOpacity, t) });\n}\n\nexport function fadeInFocus(\n  fromOpacity: number,\n  toOpacity: number,\n  staggerIndex: number,\n  staggerLength: number\n) {\n  return chain(\n    [\n      [EXIT, undefined],\n      [SCROLL, undefined],\n      [\n        ENTER,\n        stagger(\n          t => ({\n            opacity: tween(fromOpacity, toOpacity, t)\n          }),\n          staggerIndex,\n          staggerLength\n        )\n      ]\n    ],\n    { opacity: fromOpacity }\n  );\n}\n\nexport function fadeOutFocus(\n  fromOpacity: number,\n  toOpacity: number,\n  staggerIndex: number,\n  staggerLength: number\n) {\n  return chain(\n    [\n      [\n        EXIT,\n        stagger(\n          t => ({\n            opacity: tween(fromOpacity, toOpacity, t)\n          }),\n          staggerIndex,\n          staggerLength\n        )\n      ],\n      [SCROLL, undefined],\n      [ENTER, undefined]\n    ],\n    { opacity: fromOpacity }\n  );\n}\n\nexport function fadeOutIn(offOpacity = 0) {\n  return chain([[0.5, fadeOut(offOpacity)], [1, fadeIn(offOpacity)]]);\n}\n\nexport function halfFadeIn(offOpacity = 0) {\n  return chain([[0.5, undefined], [1, fadeIn(offOpacity)]], { opacity: 0 });\n}\n\nexport function halfFadeOut(offOpacity = 0) {\n  return chain([[0.5, fadeOut(offOpacity)], [1, undefined]]);\n}\n\nexport function scrollToFocus(\n  stepPair: Tuple<Step>,\n  dimensions?: Dimensions\n): Animation<number> {\n  if (!dimensions) {\n    return () => 0;\n  }\n\n  const [prevStep, nextStep] = stepPair.spread();\n\n  const prevCenter = prevStep\n    ? prevStep.focusCenter * dimensions.lineHeight\n    : 0;\n  const nextCenter = nextStep\n    ? nextStep.focusCenter * dimensions.lineHeight\n    : 0;\n\n  const animation = chain(\n    [\n      [EXIT, undefined],\n      [\n        SCROLL,\n        t => ({\n          scroll: tween(prevCenter, nextCenter, t, easing.easeInOutCubic)\n        })\n      ],\n      [ENTER, undefined]\n    ],\n    { scroll: prevCenter }\n  );\n\n  return t => animation(t).scroll;\n}\n\nexport function scaleToFocus(\n  stepPair: Tuple<Step>,\n  dimensions?: Dimensions\n): Animation<number> {\n  if (!dimensions) {\n    return () => 1;\n  }\n\n  const [prev, next] = stepPair.spread();\n\n  const prevZoom = getZoom(prev, dimensions);\n  const nextZoom = getZoom(next, dimensions);\n\n  return t =>\n    tween(\n      prevZoom || nextZoom!,\n      nextZoom || prevZoom!,\n      t,\n      easing.easeInOutQuad\n    );\n}\n\n//\n\nfunction slideToLeft(startOpacity: number, endOpacity: number): StyleAnimation {\n  return (t: number) => ({\n    opacity: tween(startOpacity, endOpacity, t),\n    transform: `translateX(${tween(0, -distx, t)}px)`\n  });\n}\n\nfunction slideFromRight(\n  startOpacity: number,\n  endOpacity: number\n): StyleAnimation {\n  return (t: number) => ({\n    opacity: tween(startOpacity, endOpacity, t),\n    transform: `translateX(${tween(distx, 0, t)}px)`\n  });\n}\n\nfunction shrinkHeight(lineHeight: number): StyleAnimation {\n  return (t: number) => ({\n    height: tween(lineHeight, outHeight, t, easing.easeInOutCubic)\n  });\n}\n\nfunction growHeight(lineHeight: number): StyleAnimation {\n  return (t: number) => ({\n    height: tween(outHeight, lineHeight, t, easing.easeInOutCubic)\n  });\n}\n\nexport function fadeOut(offOpacity: number = 0): StyleAnimation {\n  return (t: number) => ({ opacity: tween(1, offOpacity, t) });\n}\n\nexport function fadeIn(offOpacity: number = 0): StyleAnimation {\n  return (t: number) => ({ opacity: tween(offOpacity, 1, t) });\n}\n\nexport function tween(\n  from: number,\n  to: number,\n  t: number,\n  ease: Easing = easing.linear\n) {\n  return from + (to - from) * ease(t);\n}\n\nexport function chain<T extends object>(\n  steps: [number, undefined | ((t: number) => T)][],\n  start: T = {} as T\n): Animation<T> {\n  return (t: number) => {\n    let style = Object.assign({}, start);\n    let prevTop = 0;\n    for (let i = 0; i < steps.length; i++) {\n      const [top, fn] = steps[i];\n\n      const stept = t > top ? 1 : (t - prevTop) / (top - prevTop);\n\n      if (fn) {\n        Object.assign(style, fn(stept));\n      }\n\n      if (t < top) {\n        return style;\n      }\n\n      prevTop = top;\n    }\n    return style;\n  };\n}\n\nexport function stagger<T>(\n  animation: Animation<T>,\n  staggerIndex: number,\n  staggerLength: number,\n  interval = 0.3\n): Animation<T> {\n  if (staggerLength <= 1) return animation;\n  const steps = interval / (staggerLength - 1);\n  const start = steps * staggerIndex;\n  const end = 1 - interval + start;\n  return t => {\n    const st = Math.max(0, Math.min(1, (t - start) / (end - start)));\n    return animation(st);\n  };\n}\n\nfunction getZoom(step: Maybe<Step>, dimensions: Dimensions): number | null {\n  if (!step) return null;\n\n  if (!dimensions || !step.dimensions)\n    throw new Error(\"Can't get zoom without dimensions\");\n\n  const {\n    containerHeight,\n    containerWidth,\n    contentWidth,\n    lineHeight\n  } = dimensions;\n\n  const { paddingBottom, paddingTop } = step.dimensions;\n\n  const contentHeight = step.focusCount * lineHeight;\n  const availableHeight =\n    containerHeight - Math.max(paddingBottom, paddingTop) * 2;\n  const yZoom = availableHeight / contentHeight;\n\n  // if there are lines that are too long for the container\n  const xZoom = (0.9 * containerWidth) / contentWidth;\n\n  return Math.min(yZoom, 1, xZoom);\n}\n","import { Tuple } from \"./tuple\";\nimport React, { CSSProperties } from \"react\";\nimport {\n  enterLine,\n  exitLine,\n  StyleAnimation,\n  emptyStyle,\n  fadeInFocus,\n  fadeOutFocus\n} from \"./animation\";\n\ntype Step = {\n  lines: number[];\n  focus: Record<number, true | number[]>;\n};\n\ntype LineListProps = {\n  stepPair: Tuple<Step>;\n  t: number;\n  tokens: string[][];\n  types: string[][];\n  dimensions?: { lineHeight: number };\n  unfocusedStyle: { opacity: number };\n  maxLineCount: number;\n  showNumbers?: boolean;\n};\n\nexport function LineList({\n  stepPair,\n  t,\n  tokens,\n  types,\n  dimensions,\n  unfocusedStyle,\n  maxLineCount,\n  showNumbers\n}: LineListProps) {\n  const lines = React.useMemo(() => {\n    const linesPair = stepPair.selectMany((step: Step) =>\n      step.lines.map((lineKey, lineIndex) => ({\n        key: lineKey,\n        lineNumber: lineIndex + 1,\n        focus: step.focus[lineIndex]\n      }))\n    );\n\n    const fadeInLines = linesPair\n      .map((linePair, lineKey: number) => {\n        const [prev] = linePair.spread();\n        const [prevFocus, nextFocus] = linePair.select(l => l.focus).spread();\n        const isFadeIn =\n          !prev ||\n          (!prevFocus && nextFocus) ||\n          (nextFocus && Array.isArray(prevFocus));\n        return isFadeIn ? lineKey : -1;\n      })\n      .filter(key => key !== -1);\n\n    const fadeOutLines = linesPair\n      .map((linePair, lineKey: number) => {\n        const [, next] = linePair.spread();\n        const [prevFocus, nextFocus] = linePair.select(l => l.focus).spread();\n        const isFadeOut =\n          !next ||\n          (!nextFocus && prevFocus) ||\n          (prevFocus && Array.isArray(nextFocus));\n        return isFadeOut ? lineKey : -1;\n      })\n      .filter(key => key !== -1);\n\n    return linesPair.map((lineTuple, lineKey) => {\n      const offOpacity = unfocusedStyle.opacity;\n\n      const [prevLine, nextLine] = lineTuple.spread();\n      const [prevFocus, nextFocus] = lineTuple.select(l => l.focus).spread();\n      const isMoving = !prevLine || !nextLine;\n      const isChangingFocus = prevFocus !== nextFocus;\n      const isStatic = !isMoving && !isChangingFocus;\n\n      const areTokensAnimated =\n        !isStatic && (Array.isArray(prevFocus) || Array.isArray(nextFocus));\n      const areTokensStatic = !areTokensAnimated;\n\n      const tokenElements =\n        areTokensStatic &&\n        tokens[lineKey].map((token, tokeni) => (\n          <span className={\"token-\" + types[lineKey][tokeni]} key={tokeni}>\n            {token}\n          </span>\n        ));\n\n      const { lineHeight } = dimensions || {};\n\n      const anyLine = lineTuple.any();\n      const pad = maxLineCount.toString().replace(/./g, \" \");\n      const lineNumber = anyLine\n        ? (pad + anyLine.lineNumber).slice(-pad.length)\n        : \"\";\n      const lineNumberElement = showNumbers && (\n        <span className={\"token-line-number\"}>{lineNumber + \" \"}</span>\n      );\n\n      const lineElement = isStatic && (\n        <div\n          style={{\n            overflow: \"hidden\",\n            opacity: prevFocus ? undefined : offOpacity,\n            height: lineHeight\n          }}\n          key={lineKey}\n        >\n          {lineNumberElement}\n          <div\n            style={{ display: \"inline-block\" }}\n            className={`cs-line cs-line-${lineKey}`}\n          >\n            {tokenElements}\n          </div>\n        </div>\n      );\n\n      let getLineStyle: StyleAnimation = emptyStyle;\n      if (!isStatic) {\n        if (!prevLine) {\n          const fadeInIndex = fadeInLines.indexOf(lineKey);\n          const fromOpacity = Array.isArray(nextFocus) ? 1 : 0;\n          const toOpacity = nextFocus ? 1 : offOpacity;\n          getLineStyle = enterLine(\n            fromOpacity,\n            toOpacity,\n            fadeInIndex,\n            fadeInLines.length,\n            lineHeight\n          );\n        } else if (!nextLine) {\n          const fadeOutIndex = fadeOutLines.indexOf(lineKey);\n          const fromOpacity = prevFocus ? 1 : offOpacity;\n          const toOpacity = Array.isArray(prevFocus) ? 1 : 0;\n          getLineStyle = exitLine(\n            fromOpacity,\n            toOpacity,\n            fadeOutIndex,\n            fadeOutLines.length,\n            lineHeight\n          );\n        } else if (!prevFocus && nextFocus && !Array.isArray(nextFocus)) {\n          const fadeInIndex = fadeInLines.indexOf(lineKey);\n          getLineStyle = fadeInFocus(\n            offOpacity,\n            1,\n            fadeInIndex,\n            fadeInLines.length\n          );\n        } else if (prevFocus && !nextFocus && !Array.isArray(prevFocus)) {\n          const fadeOutIndex = fadeOutLines.indexOf(lineKey);\n          getLineStyle = fadeOutFocus(\n            1,\n            offOpacity,\n            fadeOutIndex,\n            fadeOutLines.length\n          );\n        }\n      }\n\n      let getTokenStyle: (t: number, i: number) => CSSProperties = emptyStyle;\n      if (!areTokensStatic) {\n        const fromFocus = tokens[lineKey].map((_, tokeni) =>\n          Array.isArray(prevFocus) ? prevFocus.includes(tokeni) : prevFocus\n        );\n        const toFocus = tokens[lineKey].map((_, tokeni) =>\n          Array.isArray(nextFocus) ? nextFocus.includes(tokeni) : nextFocus\n        );\n        const fadeInIndex = fadeInLines.indexOf(lineKey);\n        const fadeOutIndex = fadeOutLines.indexOf(lineKey);\n        getTokenStyle = (t, i) => {\n          const fromOpacity = !prevLine ? 0 : fromFocus[i] ? 1 : offOpacity;\n          const toOpacity = !nextLine ? 0 : toFocus[i] ? 1 : offOpacity;\n          const animation =\n            fromOpacity < toOpacity\n              ? fadeInFocus(\n                  fromOpacity,\n                  toOpacity,\n                  fadeInIndex,\n                  fadeInLines.length\n                )\n              : fadeOutFocus(\n                  fromOpacity,\n                  toOpacity,\n                  fadeOutIndex,\n                  fadeOutLines.length\n                );\n          return animation(t);\n        };\n      }\n\n      return {\n        lineKey,\n        lineElement,\n        tokenElements,\n        getLineStyle,\n        getTokenStyle,\n        lineNumberElement\n      };\n    });\n  }, [stepPair]);\n\n  return (\n    <React.Fragment>\n      {lines.map(\n        ({\n          lineElement,\n          lineKey,\n          tokenElements,\n          getLineStyle,\n          getTokenStyle,\n          lineNumberElement\n        }) =>\n          lineElement || (\n            <div\n              style={{ overflow: \"hidden\", ...getLineStyle(t) }}\n              key={lineKey}\n            >\n              <div\n                style={{ display: \"inline-block\" }}\n                className={`cs-line cs-line-${lineKey}`}\n              >\n                {lineNumberElement}\n                {tokenElements ||\n                  tokens[lineKey].map((token, tokeni) => (\n                    <span\n                      className={\"token-\" + types[lineKey][tokeni]}\n                      style={getTokenStyle!(t, tokeni)}\n                      key={tokeni}\n                    >\n                      {token}\n                    </span>\n                  ))}\n              </div>\n            </div>\n          )\n      )}\n    </React.Fragment>\n  );\n}\n","export class Tuple<T> {\n  prev: Maybe<T>;\n  next: Maybe<T>;\n\n  constructor(prev: Maybe<T>, next: Maybe<T>) {\n    this.prev = prev;\n    this.next = next;\n  }\n\n  spread(): [Maybe<T>, Maybe<T>] {\n    const prev = this.prev;\n    const next = this.next;\n    return [prev, next];\n  }\n\n  select<S>(selector: (x: T) => S) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new Tuple(newPrev, newNext);\n  }\n\n  selectMany<S extends { key?: any }>(selector: (x: T) => S[]) {\n    const [prev, next] = this.spread();\n    const [newPrev, newNext] = [\n      prev === null ? null : prev === undefined ? undefined : selector(prev),\n      next === null ? null : next === undefined ? undefined : selector(next)\n    ];\n    return new ArrayTuple<S>(newPrev, newNext);\n  }\n\n  any() {\n    const [prev, next] = this.spread();\n    return prev == null ? next : prev;\n  }\n\n  get(_key: any) {\n    throw Error(\"Get only supported in ArrayTuple\");\n  }\n\n  map(_mapper: any) {\n    throw Error(\"Map only supported in ArrayTuple\");\n  }\n}\n\nexport class ArrayTuple<T extends { key?: any }> extends Tuple<T[]> {\n  _dict?: Map<any, Tuple<T>>;\n\n  _getChildrenMap() {\n    if (!this._dict) {\n      const [maybePrevs, maybeNexts] = this.spread();\n      const prevs: T[] = maybePrevs || [];\n      const nexts: T[] = maybeNexts || [];\n\n      const unsortedMap = new Map<any, { prev: Maybe<T>; next?: Maybe<T> }>(\n        prevs.map(prev => [prev.key, { prev }])\n      );\n      nexts.forEach(next => {\n        const { prev } = unsortedMap.get(next.key) || { prev: undefined };\n        unsortedMap.set(next.key, { prev, next });\n      });\n\n      const sortedKeys = Array.from(unsortedMap.keys());\n      sortedKeys.sort((a, b) => (a < b ? -1 : a > b ? 1 : 0));\n      this._dict = new Map<any, Tuple<T>>(\n        sortedKeys.map(key => {\n          const { prev = undefined, next = undefined } =\n            unsortedMap.get(key) || {};\n          return [key, new Tuple(prev, next)];\n        })\n      );\n    }\n    return this._dict;\n  }\n\n  get(key: any): Tuple<T> | undefined {\n    const childrenMap = this._getChildrenMap();\n    return childrenMap.get(key);\n  }\n\n  map<M>(mapper: (t: Tuple<T>, key?: any, self?: ArrayTuple<T>) => M) {\n    const childrenMap = this._getChildrenMap();\n    const result: M[] = [];\n    childrenMap.forEach((tuple, key) => result.push(mapper(tuple, key, this)));\n    return result;\n  }\n}\n","import React from \"react\";\nimport { Step, Dimensions } from \"code-surfer-types\";\nimport { Styled, useUnfocusedStyle } from \"@code-surfer/themes\";\nimport { LineList } from \"./lines\";\nimport {\n  fadeOutIn,\n  halfFadeIn,\n  halfFadeOut,\n  scrollToFocus,\n  scaleToFocus\n} from \"./animation\";\nimport { Tuple } from \"./tuple\";\n\ntype ContainerProps = {\n  progress: number;\n  dimensions?: Dimensions;\n  steps: Step[];\n  tokens: string[][];\n  types: string[][];\n  maxLineCount: number;\n  showNumbers: boolean;\n};\n\nfunction CodeSurferContainer({\n  progress,\n  dimensions,\n  steps,\n  tokens,\n  types,\n  maxLineCount,\n  showNumbers\n}: ContainerProps) {\n  const prev = steps[Math.floor(progress)];\n  const next = steps[Math.floor(progress) + 1];\n  const stepPair = React.useMemo(() => new Tuple(prev, next), [prev, next]);\n\n  const titlePair = React.useMemo(() => stepPair.select(step => step.title), [\n    stepPair\n  ]);\n  const subtitlePair = React.useMemo(\n    () => stepPair.select(step => step.subtitle),\n    [stepPair]\n  );\n\n  const t = progress % 1;\n\n  return (\n    <div\n      className=\"cs-container\"\n      style={{\n        width: \"100%\",\n        height: dimensions ? dimensions.containerHeight : \"100%\",\n        maxHeight: \"100%\",\n        position: \"relative\"\n      }}\n    >\n      <CodeSurferContent\n        dimensions={dimensions}\n        stepPair={stepPair}\n        t={t}\n        tokens={tokens}\n        types={types}\n        maxLineCount={maxLineCount}\n        showNumbers={showNumbers}\n      />\n      <Title textPair={titlePair} t={t} />\n      <Subtitle textPair={subtitlePair} t={t} />\n    </div>\n  );\n}\n\nfunction CodeSurferContent({\n  dimensions,\n  stepPair,\n  t,\n  tokens,\n  types,\n  maxLineCount,\n  showNumbers\n}: {\n  dimensions?: Dimensions;\n  stepPair: Tuple<Step>;\n  t: number;\n  tokens: string[][];\n  types: string[][];\n  maxLineCount: number;\n  showNumbers: boolean;\n}) {\n  const ref = React.useRef<HTMLPreElement | null>(null);\n\n  const scaleAnimation = React.useMemo(\n    () => scaleToFocus(stepPair, dimensions),\n    [stepPair, dimensions]\n  );\n\n  const scrollAnimation = React.useMemo(\n    () => scrollToFocus(stepPair, dimensions),\n    [stepPair, dimensions]\n  );\n\n  const scale = scaleAnimation(t);\n  const scrollTop = scrollAnimation(t);\n  const verticalOrigin = dimensions\n    ? dimensions.containerHeight / 2 + scrollTop\n    : 0;\n\n  React.useLayoutEffect(() => {\n    if (ref.current == null) return;\n    ref.current.scrollTop = scrollTop;\n  }, [scrollTop]);\n\n  const unfocusedStyle = useUnfocusedStyle();\n\n  return (\n    <Styled.Pre\n      className=\"cs-content\"\n      ref={ref}\n      style={{\n        margin: 0,\n        height: \"100%\",\n        overflow: \"hidden\"\n      }}\n    >\n      <Styled.Code\n        className=\"cs-scaled-content\"\n        style={{\n          display: \"block\",\n          //TODO isnt contentHeight always undefined?\n          height: dimensions ? dimensions.contentHeight : \"100%\",\n          width: dimensions && dimensions.contentWidth,\n          margin:\n            dimensions &&\n            `0 ${(dimensions.containerWidth - dimensions.contentWidth) / 2}px`,\n          transform: `scale(${scale})`,\n          transformOrigin: `center ${verticalOrigin}px`\n        }}\n      >\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n        <LineList\n          stepPair={stepPair}\n          t={t}\n          tokens={tokens}\n          types={types}\n          dimensions={dimensions}\n          unfocusedStyle={unfocusedStyle}\n          maxLineCount={maxLineCount}\n          showNumbers={showNumbers}\n        />\n        <div style={{ height: dimensions && dimensions.containerHeight / 2 }} />\n      </Styled.Code>\n    </Styled.Pre>\n  );\n}\n\ntype CaptionProps = { textPair: Tuple<string | undefined>; t: number };\n\nfunction Title({ textPair, t }: CaptionProps) {\n  if (!textPair.any()) {\n    return null;\n  }\n\n  const [prev, next] = textPair.spread();\n  const text = t < 0.5 ? prev : next;\n  const textStyle = prev !== next ? fadeOutIn()(t) : undefined;\n  const backgroundStyle =\n    prev && next ? undefined : !prev ? halfFadeIn()(t) : halfFadeOut()(t);\n\n  return (\n    <Styled.Title className=\"cs-title\" style={backgroundStyle}>\n      <span style={textStyle}>{text}</span>\n    </Styled.Title>\n  );\n}\n\nfunction Subtitle({ textPair, t }: CaptionProps) {\n  if (!textPair.any()) {\n    return null;\n  }\n\n  const [prev, next] = textPair.spread();\n  const text = t < 0.5 ? prev : next;\n  const textStyle = prev !== next ? fadeOutIn()(t) : undefined;\n  const backgroundStyle =\n    prev && next ? undefined : !prev ? halfFadeIn()(t) : halfFadeOut()(t);\n\n  return (\n    <Styled.Subtitle className=\"cs-subtitle\" style={backgroundStyle}>\n      <span style={textStyle}>{text}</span>\n    </Styled.Subtitle>\n  );\n}\n\nexport default CodeSurferContainer;\n","import React from \"react\";\nimport useDimensions from \"./dimensions\";\nimport Frame from \"./frame\";\nimport { Step } from \"code-surfer-types\";\n\ntype CodeSurferProps = {\n  steps: Step[];\n  progress: number; // float between [0, steps.lenght - 1]\n  tokens: string[][];\n  types: string[][];\n  maxLineCount: number;\n  showNumbers?: boolean;\n};\n\nexport function CodeSurfer({\n  progress,\n  steps,\n  tokens,\n  types,\n  maxLineCount,\n  showNumbers = false\n}: CodeSurferProps) {\n  const fakeSteps = React.useMemo(() => getFakeSteps(steps, tokens), [steps]);\n\n  const ref = React.useRef<HTMLDivElement>(null);\n  const { dimensions, steps: stepsWithDimensions } = useDimensions(ref, steps);\n  if (!dimensions || !stepsWithDimensions) {\n    return (\n      <div\n        ref={ref}\n        style={{ overflow: \"auto\", height: \"100%\", width: \"100%\" }}\n      >\n        {fakeSteps.map((_step, i) => (\n          <div\n            key={i}\n            style={{\n              overflow: \"auto\",\n              height: \"100%\",\n              width: \"100%\"\n            }}\n          >\n            <Frame\n              steps={fakeSteps}\n              progress={i}\n              tokens={tokens}\n              types={types}\n              maxLineCount={maxLineCount}\n              showNumbers={showNumbers}\n            />\n          </div>\n        ))}\n      </div>\n    );\n  } else {\n    return (\n      <div\n        style={{ height: \"100%\", width: \"100%\", overflow: \"auto\" }}\n        ref={ref}\n      >\n        <Frame\n          steps={stepsWithDimensions}\n          progress={progress}\n          dimensions={dimensions}\n          tokens={tokens}\n          types={types}\n          maxLineCount={maxLineCount}\n          showNumbers={showNumbers}\n        />\n      </div>\n    );\n  }\n}\n\nfunction getFakeSteps(parsedSteps: Step[], tokens: string[][]) {\n  let shortLineKey = 0;\n  let length = 100;\n  for (let i = 1; i < tokens.length; i++) {\n    if (tokens[i].length < length) {\n      length = tokens[i].length;\n      shortLineKey = i;\n    }\n    if (length <= 1) {\n      break;\n    }\n  }\n\n  const fakeSteps = parsedSteps.map(step => {\n    const fakeStep: Step = {\n      ...step,\n      lines: step.lines.map(_ => shortLineKey),\n      longestLineIndex: 0\n    };\n    fakeStep.lines[0] = step.lines[step.longestLineIndex];\n    return fakeStep;\n  });\n  fakeSteps[0] = parsedSteps[0];\n  return fakeSteps;\n}\n","import React from \"react\";\nimport { InputStep, Step } from \"code-surfer-types\";\nimport { parseSteps } from \"@code-surfer/step-parser\";\nimport { StylesProvider, CodeSurferTheme, Styled } from \"@code-surfer/themes\";\nimport { UnknownError } from \"./errors\";\nimport { CodeSurfer } from \"./code-surfer\";\nimport \"./default-syntaxes\";\n\ntype ParsedSteps = {\n  steps: Step[];\n  tokens: string[][];\n  types: string[][];\n  maxLineCount: number;\n  showNumbers?: boolean;\n};\n\ntype CodeSurferProps = {\n  steps?: InputStep[];\n  parsedSteps?: ParsedSteps;\n  progress: number;\n  theme?: CodeSurferTheme;\n  nonblocking?: boolean;\n};\n\nfunction InnerCodeSurfer({\n  progress,\n  steps: inputSteps,\n  parsedSteps\n}: CodeSurferProps) {\n  const {\n    steps,\n    tokens,\n    types,\n    maxLineCount,\n    showNumbers\n  } = React.useMemo(() => {\n    if (parsedSteps) return parsedSteps;\n    return parseSteps(inputSteps!);\n  }, [inputSteps, parsedSteps]);\n\n  if (!steps || steps.length === 0) {\n    throw new Error(\"No steps\");\n  }\n\n  return (\n    <CodeSurfer\n      progress={progress}\n      steps={steps}\n      tokens={tokens}\n      types={types}\n      maxLineCount={maxLineCount!}\n      showNumbers={showNumbers}\n    />\n  );\n}\n\nfunction CodeSurferWrapper({ theme, nonblocking, ...props }: CodeSurferProps) {\n  const [wait, setWait] = React.useState(nonblocking);\n\n  React.useEffect(() => {\n    if (!wait) return;\n    setWait(false);\n  }, []);\n\n  if (wait)\n    return (\n      <StylesProvider theme={theme}>\n        <Styled.Placeholder />\n      </StylesProvider>\n    );\n\n  return (\n    <StylesProvider theme={theme}>\n      <InnerCodeSurfer {...props} />\n    </StylesProvider>\n  );\n}\n\nexport { CodeSurferWrapper as CodeSurfer, UnknownError };\n"],"names":["UnknownError","error","React","ErrorBox","header","body","toString","style","background","color","border","padding","maxWidth","margin","fontFamily","fontSize","useWindowResize","handler","deps","useEffect","window","addEventListener","removeEventListener","useDimensions","ref","steps","useState","result","setResult","useLayoutEffect","current","containers","querySelectorAll","stepsDimensions","Array","from","map","container","i","getStepDimensions","containerHeight","Math","max","d","containerWidth","contentWidth","lineHeight","dimensions","contentHeight","undefined","step","paddingTop","paddingBottom","longestLineKey","lines","longestLineIndex","longestLineSpan","querySelector","containerParent","parentElement","title","subtitle","lineCount","length","heightOverflow","scrollHeight","clientHeight","avaliableHeight","outerHeight","codeHeight","clientWidth","element","styles","getComputedStyle","parseFloat","offsetHeight","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","distx","outHeight","EXIT","SCROLL","ENTER","emptyStyle","exitLine","fromOpacity","toOpacity","staggerIndex","staggerLength","chain","stagger","slideToLeft","shrinkHeight","height","enterLine","growHeight","slideFromRight","transform","opacity","fadeInFocus","tween","fadeOutFocus","fadeOutIn","offOpacity","fadeOut","fadeIn","halfFadeIn","halfFadeOut","scrollToFocus","stepPair","spread","prevStep","nextStep","prevCenter","focusCenter","nextCenter","animation","scroll","easing","scaleToFocus","prev","next","prevZoom","getZoom","nextZoom","startOpacity","endOpacity","to","ease","start","Object","assign","prevTop","top","fn","stept","interval","end","st","min","Error","focusCount","availableHeight","yZoom","xZoom","LineList","tokens","types","unfocusedStyle","maxLineCount","showNumbers","useMemo","linesPair","selectMany","lineKey","lineIndex","key","lineNumber","focus","fadeInLines","linePair","select","l","prevFocus","nextFocus","isFadeIn","isArray","filter","fadeOutLines","isFadeOut","lineTuple","prevLine","nextLine","isMoving","isChangingFocus","isStatic","areTokensAnimated","areTokensStatic","tokenElements","token","tokeni","className","anyLine","any","pad","replace","slice","lineNumberElement","lineElement","overflow","display","getLineStyle","fadeInIndex","indexOf","fadeOutIndex","getTokenStyle","fromFocus","_","includes","toFocus","Fragment","Tuple","selector","newPrev","newNext","ArrayTuple","get","_key","_mapper","_getChildrenMap","_dict","maybePrevs","maybeNexts","prevs","nexts","unsortedMap","Map","forEach","set","sortedKeys","keys","sort","a","b","childrenMap","mapper","tuple","push","CodeSurferContainer","progress","floor","titlePair","subtitlePair","width","maxHeight","position","CodeSurferContent","Title","textPair","Subtitle","useRef","scaleAnimation","scrollAnimation","scale","scrollTop","verticalOrigin","useUnfocusedStyle","Styled","Pre","Code","transformOrigin","text","textStyle","backgroundStyle","CodeSurfer","fakeSteps","getFakeSteps","stepsWithDimensions","_step","Frame","parsedSteps","shortLineKey","fakeStep","InnerCodeSurfer","inputSteps","parseSteps","CodeSurferWrapper","theme","nonblocking","props","wait","setWait","StylesProvider","Placeholder"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAMgBA;MAAeC,aAAAA;;SAEtBC,mBAAA,CAACC,QAAD;IAAUC,MAAM,EAAC;IAA0BC,IAAI,EAAEJ,KAAK,CAACK,QAAN;GAAjD,CAAP;;AAGF;AA0EA,SAASH,QAAT;MAAoBC,eAAAA;MAAQC,aAAAA;SAExBH,mBAAA,MAAA;IACEK,KAAK,EAAE;MACLC,UAAU,EAAE,SADP;MAELC,KAAK,EAAE,SAFF;MAGLC,MAAM,EAAE,mBAHH;MAILC,OAAO,EAAE,WAJJ;MAKLC,QAAQ,EAAE,MALL;MAMLC,MAAM,EAAE,QANH;MAOLC,UAAU,EAAE,WAPP;MAQLC,QAAQ,EAAE;;GATd,EAYEb,mBAAA,KAAA,MAAA,EAAKE,MAAL,CAZF,EAaEF,mBAAA,IAAA,MAAA,EAAIG,IAAJ,CAbF,CADF;;;ACnFF;;AAEA,SAAwBW,gBACtBC,SACAC;EAEAhB,KAAK,CAACiB,SAAN,CAAgB;IACdC,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCJ,OAAlC;WACO;MACLG,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCL,OAArC;KADF;GAFF,EAKGC,IALH;;;ACHF,SAASK,aAAT,CACEC,GADF,EAEEC,KAFF;wBAI8BvB,KAAK,CAACwB,QAAN,CAAwC,IAAxC;MAArBC;MAAQC;;;EAGfZ,eAAe,CAAC;WAAMY,SAAS,CAAC,IAAD,CAAf;GAAD,EAAwB,CAACA,SAAD,CAAxB,CAAf;EAEA1B,KAAK,CAAC2B,eAAN,CAAsB;QAChB,CAACL,GAAG,CAACM,OAAT,EAAkB;QACdH,MAAJ,EAAY;QAENI,UAAU,GAAGP,GAAG,CAACM,OAAJ,CAAYE,gBAAZ,CACjB,eADiB,CAAnB;QAIMC,eAAe,GAAGC,KAAK,CAACC,IAAN,CAAWJ,UAAX,EAAuBK,GAAvB,CAA2B,UAACC,SAAD,EAAYC,CAAZ;aACjDC,iBAAiB,CAACF,SAAD,EAAYZ,KAAK,CAACa,CAAD,CAAjB,CADgC;KAA3B,CAAxB;QAIME,eAAe,GAAGC,IAAI,CAACC,GAAL,OAAAD,IAAI,EACvBR,eAAe,CAACG,GAAhB,CAAoB,UAAAO,CAAC;aAAIA,CAAC,CAACH,eAAN;KAArB,CADuB,CAA5B;QAIMI,cAAc,GAAGH,IAAI,CAACC,GAAL,OAAAD,IAAI,EACtBR,eAAe,CAACG,GAAhB,CAAoB,UAAAO,CAAC;aAAIA,CAAC,CAACC,cAAN;KAArB,CADsB,CAA3B;QAIMC,YAAY,GAAGJ,IAAI,CAACC,GAAL,OAAAD,IAAI,EAAQR,eAAe,CAACG,GAAhB,CAAoB,UAAAO,CAAC;aAAIA,CAAC,CAACE,YAAN;KAArB,CAAR,CAAzB;QAEMC,UAAU,GAAGL,IAAI,CAACC,GAAL,OAAAD,IAAI,EAAQR,eAAe,CAACG,GAAhB,CAAoB,UAAAO,CAAC;aAAIA,CAAC,CAACG,UAAN;KAArB,CAAR,CAAvB;IAEAlB,SAAS,CAAC;MACRmB,UAAU,EAAE;QACVD,UAAU,EAAVA,UADU;QAEVD,YAAY,EAAZA,YAFU;QAGVL,eAAe,EAAfA,eAHU;QAIVI,cAAc,EAAdA,cAJU;;QAMVI,aAAa,EAAEC;OAPT;MASRxB,KAAK,EAAEA,KAAK,CAACW,GAAN,CAAU,UAACc,IAAD,EAAOZ,CAAP;4BACZY,IADY;UAEfH,UAAU,EAAE;YACVI,UAAU,EAAElB,eAAe,CAACK,CAAD,CAAf,CAAmBa,UADrB;YAEVC,aAAa,EAAEnB,eAAe,CAACK,CAAD,CAAf,CAAmBc;;;OAJ/B;KATA,CAAT;GAxBF,EAyCG,CAACzB,MAAD,CAzCH;SA2COA,MAAM,IAAI,EAAjB;;;AAGF,SAASY,iBAAT,CAA2BF,SAA3B,EAAmDa,IAAnD;MACQG,cAAc,GAAGH,IAAI,CAACI,KAAL,CAAWJ,IAAI,CAACK,gBAAhB,CAAvB;MACMC,eAAe,GAAGnB,SAAS,CAACoB,aAAV,eAAoCJ,cAApC,CAAxB;MACMK,eAAe,GAAGrB,SAAS,CAACsB,aAAlC;MACMC,KAAK,GAAGvB,SAAS,CAACoB,aAAV,CAAwB,WAAxB,CAAd;MACMI,QAAQ,GAAGxB,SAAS,CAACoB,aAAV,CAAwB,cAAxB,CAAjB;MAEMK,SAAS,GAAGZ,IAAI,CAACI,KAAL,CAAWS,MAA7B;MACMC,cAAc,GAClBN,eAAe,CAACO,YAAhB,GAA+BP,eAAe,CAACQ,YADjD;MAEMC,eAAe,GAAG9B,SAAS,CAAC4B,YAAV,GAAyBD,cAAjD;MAEMlB,UAAU,GAAGU,eAAe,GAAGA,eAAe,CAACU,YAAnB,GAAkC,CAApE;MACMf,UAAU,GAAGS,KAAK,GAAGQ,WAAW,CAACR,KAAD,CAAd,GAAwBd,UAAhD;MACMM,aAAa,GAAGS,QAAQ,GAAGO,WAAW,CAACP,QAAD,CAAd,GAA2Bf,UAAzD;MAEMuB,UAAU,GAAGP,SAAS,GAAGhB,UAAZ,GAAyB,CAA5C;;;MAGMN,eAAe,GAAG2B,eAAxB;MACMvB,cAAc,GAAGP,SAAS,CAACiC,WAAjC;MACMtB,aAAa,GAAGqB,UAAU,GAAG7B,eAAnC;MAEMK,YAAY,GAAGW,eAAe,GAAGA,eAAe,CAACc,WAAnB,GAAiC,CAArE;SAEO;IACLxB,UAAU,EAAVA,UADK;IAELE,aAAa,EAAbA,aAFK;IAGLH,YAAY,EAAZA,YAHK;IAILM,UAAU,EAAVA,UAJK;IAKLC,aAAa,EAAbA,aALK;IAMLZ,eAAe,EAAfA,eANK;IAOLI,cAAc,EAAdA;GAPF;;;AAWF,SAASwB,WAAT,CAAqBG,OAArB;MACMC,MAAM,GAAGpD,MAAM,CAACqD,gBAAP,CAAwBF,OAAxB,CAAb;MACI1D,MAAM,GACR6D,UAAU,CAACF,MAAM,CAAC,WAAD,CAAN,IAAuB,GAAxB,CAAV,GACAE,UAAU,CAACF,MAAM,CAAC,cAAD,CAAN,IAA0B,GAA3B,CAFZ;SAGOD,OAAO,CAACI,YAAR,GAAuB9D,MAA9B;;;ACpGF,aAAe;;EAEb+D,MAAM,EAAE,gBAASC,CAAT;WACCA,CAAP;GAHW;;EAMbC,UAAU,EAAE,oBAASD,CAAT;WACHA,CAAC,GAAGA,CAAX;GAPW;;EAUbE,WAAW,EAAE,qBAASF,CAAT;WACJA,CAAC,IAAI,IAAIA,CAAR,CAAR;GAXW;;EAcbG,aAAa,EAAE,uBAASH,CAAT;WACNA,CAAC,GAAG,GAAJ,GAAU,IAAIA,CAAJ,GAAQA,CAAlB,GAAsB,CAAC,CAAD,GAAK,CAAC,IAAI,IAAIA,CAAT,IAAcA,CAAhD;GAfW;;EAkBbI,WAAW,EAAE,qBAASJ,CAAT;WACJA,CAAC,GAAGA,CAAJ,GAAQA,CAAf;GAnBW;;EAsBbK,YAAY,EAAE,sBAASL,CAAT;WACL,EAAEA,CAAF,GAAMA,CAAN,GAAUA,CAAV,GAAc,CAArB;GAvBW;;EA0BbM,cAAc,EAAE,wBAASN,CAAT;WACPA,CAAC,GAAG,GAAJ,GAAU,IAAIA,CAAJ,GAAQA,CAAR,GAAYA,CAAtB,GAA0B,CAACA,CAAC,GAAG,CAAL,KAAW,IAAIA,CAAJ,GAAQ,CAAnB,KAAyB,IAAIA,CAAJ,GAAQ,CAAjC,IAAsC,CAAvE;GA3BW;;EA8BbO,WAAW,EAAE,qBAASP,CAAT;WACJA,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAYA,CAAnB;GA/BW;;EAkCbQ,YAAY,EAAE,sBAASR,CAAT;WACL,IAAI,EAAEA,CAAF,GAAMA,CAAN,GAAUA,CAAV,GAAcA,CAAzB;GAnCW;;EAsCbS,cAAc,EAAE,wBAAST,CAAT;WACPA,CAAC,GAAG,GAAJ,GAAU,IAAIA,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAA1B,GAA8B,IAAI,IAAI,EAAEA,CAAN,GAAUA,CAAV,GAAcA,CAAd,GAAkBA,CAA3D;GAvCW;;EA0CbU,WAAW,EAAE,qBAASV,CAAT;WACJA,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAvB;GA3CW;;EA8CbW,YAAY,EAAE,sBAASX,CAAT;WACL,IAAI,EAAEA,CAAF,GAAMA,CAAN,GAAUA,CAAV,GAAcA,CAAd,GAAkBA,CAA7B;GA/CW;;EAkDbY,cAAc,EAAE,wBAASZ,CAAT;WACPA,CAAC,GAAG,GAAJ,GAAU,KAAKA,CAAL,GAASA,CAAT,GAAaA,CAAb,GAAiBA,CAAjB,GAAqBA,CAA/B,GAAmC,IAAI,KAAK,EAAEA,CAAP,GAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAArE;;CAnDJ;;ACGA,IAAMa,KAAK,GAAG,GAAd;AACA,IAAMC,SAAS,GAAG,CAAlB;IAEOC,OAAwB;IAAlBC,SAAwB;IAAhBC,QAAsB;AAK3C,SAAgBC;SACP,EAAP;;AAGF,SAAgBC,SACdC,aACAC,WACAC,cACAC,eACAtD;MAAAA;IAAAA,aAAqB;;;SAEduD,KAAK,CACV,CACE,CACET,IADF,EAEEU,OAAO,CACLC,WAAW,CAACN,WAAD,EAAcC,SAAd,CADN,EAELC,YAFK,EAGLC,aAHK,CAFT,CADF,EASE,CAACP,MAAD,EAASW,YAAY,CAAC1D,UAAD,CAArB,CATF,EAUE,CAACgD,KAAD,EAAQ7C,SAAR,CAVF,CADU,EAaV;IACEwD,MAAM,EAAE3D;GAdA,CAAZ;;AAmBF,SAAgB4D,UACdT,aACAC,WACAC,cACAC,eACAtD;MAAAA;IAAAA,aAAqB;;;SAEduD,KAAK,CACV,CACE,CAACT,IAAD,EAAO3C,SAAP,CADF,EAEE,CAAC4C,MAAD,EAASc,UAAU,CAAC7D,UAAD,CAAnB,CAFF,EAGE,CACEgD,KADF,EAEEQ,OAAO,CACLM,cAAc,CAACX,WAAD,EAAcC,SAAd,CADT,EAELC,YAFK,EAGLC,aAHK,CAFT,CAHF,CADU,EAaV;IACES,SAAS,kBAAgBnB,KAAhB,QADX;IAEEe,MAAM,EAAE,CAFV;IAGEK,OAAO,EAAE;GAhBD,CAAZ;;AAqBF,SAQgBC,YACdd,aACAC,WACAC,cACAC;SAEOC,KAAK,CACV,CACE,CAACT,IAAD,EAAO3C,SAAP,CADF,EAEE,CAAC4C,MAAD,EAAS5C,SAAT,CAFF,EAGE,CACE6C,KADF,EAEEQ,OAAO,CACL,UAAAzB,CAAC;WAAK;MACJiC,OAAO,EAAEE,KAAK,CAACf,WAAD,EAAcC,SAAd,EAAyBrB,CAAzB;KADf;GADI,EAILsB,YAJK,EAKLC,aALK,CAFT,CAHF,CADU,EAeV;IAAEU,OAAO,EAAEb;GAfD,CAAZ;;AAmBF,SAAgBgB,aACdhB,aACAC,WACAC,cACAC;SAEOC,KAAK,CACV,CACE,CACET,IADF,EAEEU,OAAO,CACL,UAAAzB,CAAC;WAAK;MACJiC,OAAO,EAAEE,KAAK,CAACf,WAAD,EAAcC,SAAd,EAAyBrB,CAAzB;KADf;GADI,EAILsB,YAJK,EAKLC,aALK,CAFT,CADF,EAWE,CAACP,MAAD,EAAS5C,SAAT,CAXF,EAYE,CAAC6C,KAAD,EAAQ7C,SAAR,CAZF,CADU,EAeV;IAAE6D,OAAO,EAAEb;GAfD,CAAZ;;AAmBF,SAAgBiB,UAAUC;MAAAA;IAAAA,aAAa;;;SAC9Bd,KAAK,CAAC,CAAC,CAAC,GAAD,EAAMe,OAAO,CAACD,UAAD,CAAb,CAAD,EAA6B,CAAC,CAAD,EAAIE,MAAM,CAACF,UAAD,CAAV,CAA7B,CAAD,CAAZ;;AAGF,SAAgBG,WAAWH;MAAAA;IAAAA,aAAa;;;SAC/Bd,KAAK,CAAC,CAAC,CAAC,GAAD,EAAMpD,SAAN,CAAD,EAAmB,CAAC,CAAD,EAAIoE,MAAM,CAACF,UAAD,CAAV,CAAnB,CAAD,EAA8C;IAAEL,OAAO,EAAE;GAAzD,CAAZ;;AAGF,SAAgBS,YAAYJ;MAAAA;IAAAA,aAAa;;;SAChCd,KAAK,CAAC,CAAC,CAAC,GAAD,EAAMe,OAAO,CAACD,UAAD,CAAb,CAAD,EAA6B,CAAC,CAAD,EAAIlE,SAAJ,CAA7B,CAAD,CAAZ;;AAGF,SAAgBuE,cACdC,UACA1E;MAEI,CAACA,UAAL,EAAiB;WACR;aAAM,CAAN;KAAP;;;yBAG2B0E,QAAQ,CAACC,MAAT;MAAtBC;MAAUC;;MAEXC,UAAU,GAAGF,QAAQ,GACvBA,QAAQ,CAACG,WAAT,GAAuB/E,UAAU,CAACD,UADX,GAEvB,CAFJ;MAGMiF,UAAU,GAAGH,QAAQ,GACvBA,QAAQ,CAACE,WAAT,GAAuB/E,UAAU,CAACD,UADX,GAEvB,CAFJ;MAIMkF,SAAS,GAAG3B,KAAK,CACrB,CACE,CAACT,IAAD,EAAO3C,SAAP,CADF,EAEE,CACE4C,MADF,EAEE,UAAAhB,CAAC;WAAK;MACJoD,MAAM,EAAEjB,KAAK,CAACa,UAAD,EAAaE,UAAb,EAAyBlD,CAAzB,EAA4BqD,MAAM,CAAC/C,cAAnC;KADd;GAFH,CAFF,EAQE,CAACW,KAAD,EAAQ7C,SAAR,CARF,CADqB,EAWrB;IAAEgF,MAAM,EAAEJ;GAXW,CAAvB;SAcO,UAAAhD,CAAC;WAAImD,SAAS,CAACnD,CAAD,CAAT,CAAaoD,MAAjB;GAAR;;AAGF,SAAgBE,aACdV,UACA1E;MAEI,CAACA,UAAL,EAAiB;WACR;aAAM,CAAN;KAAP;;;0BAGmB0E,QAAQ,CAACC,MAAT;MAAdU;MAAMC;;MAEPC,QAAQ,GAAGC,OAAO,CAACH,IAAD,EAAOrF,UAAP,CAAxB;MACMyF,QAAQ,GAAGD,OAAO,CAACF,IAAD,EAAOtF,UAAP,CAAxB;SAEO,UAAA8B,CAAC;WACNmC,KAAK,CACHsB,QAAQ,IAAIE,QADT,EAEHA,QAAQ,IAAIF,QAFT,EAGHzD,CAHG,EAIHqD,MAAM,CAAClD,aAJJ,CADC;GAAR;;;AAWF,SAASuB,WAAT,CAAqBkC,YAArB,EAA2CC,UAA3C;SACS,UAAC7D,CAAD;WAAgB;MACrBiC,OAAO,EAAEE,KAAK,CAACyB,YAAD,EAAeC,UAAf,EAA2B7D,CAA3B,CADO;MAErBgC,SAAS,kBAAgBG,KAAK,CAAC,CAAD,EAAI,CAACtB,KAAL,EAAYb,CAAZ,CAArB;KAFJ;GAAP;;;AAMF,SAAS+B,cAAT,CACE6B,YADF,EAEEC,UAFF;SAIS,UAAC7D,CAAD;WAAgB;MACrBiC,OAAO,EAAEE,KAAK,CAACyB,YAAD,EAAeC,UAAf,EAA2B7D,CAA3B,CADO;MAErBgC,SAAS,kBAAgBG,KAAK,CAACtB,KAAD,EAAQ,CAAR,EAAWb,CAAX,CAArB;KAFJ;GAAP;;;AAMF,SAAS2B,YAAT,CAAsB1D,UAAtB;SACS,UAAC+B,CAAD;WAAgB;MACrB4B,MAAM,EAAEO,KAAK,CAAClE,UAAD,EAAa6C,SAAb,EAAwBd,CAAxB,EAA2BqD,MAAM,CAAC/C,cAAlC;KADR;GAAP;;;AAKF,SAASwB,UAAT,CAAoB7D,UAApB;SACS,UAAC+B,CAAD;WAAgB;MACrB4B,MAAM,EAAEO,KAAK,CAACrB,SAAD,EAAY7C,UAAZ,EAAwB+B,CAAxB,EAA2BqD,MAAM,CAAC/C,cAAlC;KADR;GAAP;;;AAKF,SAAgBiC,QAAQD;MAAAA;IAAAA,aAAqB;;;SACpC,UAACtC,CAAD;WAAgB;MAAEiC,OAAO,EAAEE,KAAK,CAAC,CAAD,EAAIG,UAAJ,EAAgBtC,CAAhB;KAAhC;GAAP;;AAGF,SAAgBwC,OAAOF;MAAAA;IAAAA,aAAqB;;;SACnC,UAACtC,CAAD;WAAgB;MAAEiC,OAAO,EAAEE,KAAK,CAACG,UAAD,EAAa,CAAb,EAAgBtC,CAAhB;KAAhC;GAAP;;AAGF,SAAgBmC,MACd7E,MACAwG,IACA9D,GACA+D;MAAAA;IAAAA,OAAeV,MAAM,CAACtD;;;SAEfzC,IAAI,GAAG,CAACwG,EAAE,GAAGxG,IAAN,IAAcyG,IAAI,CAAC/D,CAAD,CAAhC;;AAGF,SAAgBwB,MACd5E,OACAoH;MAAAA;IAAAA,QAAW;;;SAEJ,UAAChE,CAAD;QACDtE,KAAK,GAAGuI,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,KAAlB,CAAZ;QACIG,OAAO,GAAG,CAAd;;SACK,IAAI1G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,KAAK,CAACsC,MAA1B,EAAkCzB,CAAC,EAAnC,EAAuC;qBACnBb,KAAK,CAACa,CAAD,CADc;UAC9B2G,GAD8B;UACzBC,EADyB;UAG/BC,KAAK,GAAGtE,CAAC,GAAGoE,GAAJ,GAAU,CAAV,GAAc,CAACpE,CAAC,GAAGmE,OAAL,KAAiBC,GAAG,GAAGD,OAAvB,CAA5B;;UAEIE,EAAJ,EAAQ;QACNJ,MAAM,CAACC,MAAP,CAAcxI,KAAd,EAAqB2I,EAAE,CAACC,KAAD,CAAvB;;;UAGEtE,CAAC,GAAGoE,GAAR,EAAa;eACJ1I,KAAP;;;MAGFyI,OAAO,GAAGC,GAAV;;;WAEK1I,KAAP;GAlBF;;AAsBF,SAAgB+F,QACd0B,WACA7B,cACAC,eACAgD;MAAAA;IAAAA,WAAW;;;MAEPhD,aAAa,IAAI,CAArB,EAAwB,OAAO4B,SAAP;MAClBvG,KAAK,GAAG2H,QAAQ,IAAIhD,aAAa,GAAG,CAApB,CAAtB;MACMyC,KAAK,GAAGpH,KAAK,GAAG0E,YAAtB;MACMkD,GAAG,GAAG,IAAID,QAAJ,GAAeP,KAA3B;SACO,UAAAhE,CAAC;QACAyE,EAAE,GAAG7G,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAAC8G,GAAL,CAAS,CAAT,EAAY,CAAC1E,CAAC,GAAGgE,KAAL,KAAeQ,GAAG,GAAGR,KAArB,CAAZ,CAAZ,CAAX;WACOb,SAAS,CAACsB,EAAD,CAAhB;GAFF;;;AAMF,SAASf,OAAT,CAAiBrF,IAAjB,EAAoCH,UAApC;MACM,CAACG,IAAL,EAAW,OAAO,IAAP;MAEP,CAACH,UAAD,IAAe,CAACG,IAAI,CAACH,UAAzB,EACE,MAAM,IAAIyG,KAAJ,CAAU,mCAAV,CAAN;MAGAhH,kBAIEO,WAJFP;MACAI,iBAGEG,WAHFH;MACAC,eAEEE,WAFFF;MACAC,aACEC,WADFD;yBAGoCI,IAAI,CAACH;MAAnCK,iCAAAA;MAAeD,8BAAAA;MAEjBH,aAAa,GAAGE,IAAI,CAACuG,UAAL,GAAkB3G,UAAxC;MACM4G,eAAe,GACnBlH,eAAe,GAAGC,IAAI,CAACC,GAAL,CAASU,aAAT,EAAwBD,UAAxB,IAAsC,CAD1D;MAEMwG,KAAK,GAAGD,eAAe,GAAG1G,aAAhC;;MAGM4G,KAAK,GAAI,MAAMhH,cAAP,GAAyBC,YAAvC;SAEOJ,IAAI,CAAC8G,GAAL,CAASI,KAAT,EAAgB,CAAhB,EAAmBC,KAAnB,CAAP;;;SC3RcC;MACdpC,gBAAAA;MACA5C,SAAAA;MACAiF,cAAAA;MACAC,aAAAA;MACAhH,kBAAAA;MACAiH,sBAAAA;MACAC,oBAAAA;MACAC,mBAAAA;MAEM5G,KAAK,GAAGpD,KAAK,CAACiK,OAAN,CAAc;QACpBC,SAAS,GAAG3C,QAAQ,CAAC4C,UAAT,CAAoB,UAACnH,IAAD;aACpCA,IAAI,CAACI,KAAL,CAAWlB,GAAX,CAAe,UAACkI,OAAD,EAAUC,SAAV;eAAyB;UACtCC,GAAG,EAAEF,OADiC;UAEtCG,UAAU,EAAEF,SAAS,GAAG,CAFc;UAGtCG,KAAK,EAAExH,IAAI,CAACwH,KAAL,CAAWH,SAAX;SAHM;OAAf,CADoC;KAApB,CAAlB;QAQMI,WAAW,GAAGP,SAAS,CAC1BhI,GADiB,CACb,UAACwI,QAAD,EAAWN,OAAX;6BACYM,QAAQ,CAAClD,MAAT;UAARU;;kCACwBwC,QAAQ,CAACC,MAAT,CAAgB,UAAAC,CAAC;eAAIA,CAAC,CAACJ,KAAN;OAAjB,EAA8BhD,MAA9B;UAAxBqD;UAAWC;;UACZC,QAAQ,GACZ,CAAC7C,IAAD,IACC,CAAC2C,SAAD,IAAcC,SADf,IAECA,SAAS,IAAI9I,KAAK,CAACgJ,OAAN,CAAcH,SAAd,CAHhB;aAIOE,QAAQ,GAAGX,OAAH,GAAa,CAAC,CAA7B;KARgB,EAUjBa,MAViB,CAUV,UAAAX,GAAG;aAAIA,GAAG,KAAK,CAAC,CAAb;KAVO,CAApB;QAYMY,YAAY,GAAGhB,SAAS,CAC3BhI,GADkB,CACd,UAACwI,QAAD,EAAWN,OAAX;8BACcM,QAAQ,CAAClD,MAAT;UAARW;;mCACsBuC,QAAQ,CAACC,MAAT,CAAgB,UAAAC,CAAC;eAAIA,CAAC,CAACJ,KAAN;OAAjB,EAA8BhD,MAA9B;UAAxBqD;UAAWC;;UACZK,SAAS,GACb,CAAChD,IAAD,IACC,CAAC2C,SAAD,IAAcD,SADf,IAECA,SAAS,IAAI7I,KAAK,CAACgJ,OAAN,CAAcF,SAAd,CAHhB;aAIOK,SAAS,GAAGf,OAAH,GAAa,CAAC,CAA9B;KARiB,EAUlBa,MAVkB,CAUX,UAAAX,GAAG;aAAIA,GAAG,KAAK,CAAC,CAAb;KAVQ,CAArB;WAYOJ,SAAS,CAAChI,GAAV,CAAc,UAACkJ,SAAD,EAAYhB,OAAZ;UACbnD,UAAU,GAAG6C,cAAc,CAAClD,OAAlC;;8BAE6BwE,SAAS,CAAC5D,MAAV;UAAtB6D;UAAUC;;kCACcF,SAAS,CAACT,MAAV,CAAiB,UAAAC,CAAC;eAAIA,CAAC,CAACJ,KAAN;OAAlB,EAA+BhD,MAA/B;UAAxBqD;UAAWC;;UACZS,QAAQ,GAAG,CAACF,QAAD,IAAa,CAACC,QAA/B;UACME,eAAe,GAAGX,SAAS,KAAKC,SAAtC;UACMW,QAAQ,GAAG,CAACF,QAAD,IAAa,CAACC,eAA/B;UAEME,iBAAiB,GACrB,CAACD,QAAD,KAAczJ,KAAK,CAACgJ,OAAN,CAAcH,SAAd,KAA4B7I,KAAK,CAACgJ,OAAN,CAAcF,SAAd,CAA1C,CADF;UAEMa,eAAe,GAAG,CAACD,iBAAzB;UAEME,aAAa,GACjBD,eAAe,IACf/B,MAAM,CAACQ,OAAD,CAAN,CAAgBlI,GAAhB,CAAoB,UAAC2J,KAAD,EAAQC,MAAR;eAClB9L,mBAAA,OAAA;UAAM+L,SAAS,EAAE,WAAWlC,KAAK,CAACO,OAAD,CAAL,CAAe0B,MAAf;UAAwBxB,GAAG,EAAEwB;SAAzD,EACGD,KADH,CADkB;OAApB,CAFF;;kBAQuBhJ,UAAU,IAAI;UAA7BD,mBAAAA;;UAEFoJ,OAAO,GAAGZ,SAAS,CAACa,GAAV,EAAhB;UACMC,GAAG,GAAGnC,YAAY,CAAC3J,QAAb,GAAwB+L,OAAxB,CAAgC,IAAhC,EAAsC,GAAtC,CAAZ;UACM5B,UAAU,GAAGyB,OAAO,GACtB,CAACE,GAAG,GAAGF,OAAO,CAACzB,UAAf,EAA2B6B,KAA3B,CAAiC,CAACF,GAAG,CAACrI,MAAtC,CADsB,GAEtB,EAFJ;UAGMwI,iBAAiB,GAAGrC,WAAW,IACnChK,mBAAA,OAAA;QAAM+L,SAAS,EAAE;OAAjB,EAAuCxB,UAAU,GAAG,GAApD,CADF;UAIM+B,WAAW,GAAGb,QAAQ,IAC1BzL,mBAAA,MAAA;QACEK,KAAK,EAAE;UACLkM,QAAQ,EAAE,QADL;UAEL3F,OAAO,EAAEiE,SAAS,GAAG9H,SAAH,GAAekE,UAF5B;UAGLV,MAAM,EAAE3D;;QAEV0H,GAAG,EAAEF;OANP,EAQGiC,iBARH,EASErM,mBAAA,MAAA;QACEK,KAAK,EAAE;UAAEmM,OAAO,EAAE;;QAClBT,SAAS,uBAAqB3B;OAFhC,EAIGwB,aAJH,CATF,CADF;UAmBIa,YAAY,GAAmB5G,UAAnC;;UACI,CAAC4F,QAAL,EAAe;YACT,CAACJ,QAAL,EAAe;cACPqB,WAAW,GAAGjC,WAAW,CAACkC,OAAZ,CAAoBvC,OAApB,CAApB;cACMrE,WAAW,GAAG/D,KAAK,CAACgJ,OAAN,CAAcF,SAAd,IAA2B,CAA3B,GAA+B,CAAnD;cACM9E,SAAS,GAAG8E,SAAS,GAAG,CAAH,GAAO7D,UAAlC;UACAwF,YAAY,GAAGjG,SAAS,CACtBT,WADsB,EAEtBC,SAFsB,EAGtB0G,WAHsB,EAItBjC,WAAW,CAAC5G,MAJU,EAKtBjB,UALsB,CAAxB;SAJF,MAWO,IAAI,CAAC0I,QAAL,EAAe;cACdsB,YAAY,GAAG1B,YAAY,CAACyB,OAAb,CAAqBvC,OAArB,CAArB;;cACMrE,YAAW,GAAG8E,SAAS,GAAG,CAAH,GAAO5D,UAApC;;cACMjB,UAAS,GAAGhE,KAAK,CAACgJ,OAAN,CAAcH,SAAd,IAA2B,CAA3B,GAA+B,CAAjD;;UACA4B,YAAY,GAAG3G,QAAQ,CACrBC,YADqB,EAErBC,UAFqB,EAGrB4G,YAHqB,EAIrB1B,YAAY,CAACrH,MAJQ,EAKrBjB,UALqB,CAAvB;SAJK,MAWA,IAAI,CAACiI,SAAD,IAAcC,SAAd,IAA2B,CAAC9I,KAAK,CAACgJ,OAAN,CAAcF,SAAd,CAAhC,EAA0D;cACzD4B,YAAW,GAAGjC,WAAW,CAACkC,OAAZ,CAAoBvC,OAApB,CAApB;;UACAqC,YAAY,GAAG5F,WAAW,CACxBI,UADwB,EAExB,CAFwB,EAGxByF,YAHwB,EAIxBjC,WAAW,CAAC5G,MAJY,CAA1B;SAFK,MAQA,IAAIgH,SAAS,IAAI,CAACC,SAAd,IAA2B,CAAC9I,KAAK,CAACgJ,OAAN,CAAcH,SAAd,CAAhC,EAA0D;cACzD+B,aAAY,GAAG1B,YAAY,CAACyB,OAAb,CAAqBvC,OAArB,CAArB;;UACAqC,YAAY,GAAG1F,YAAY,CACzB,CADyB,EAEzBE,UAFyB,EAGzB2F,aAHyB,EAIzB1B,YAAY,CAACrH,MAJY,CAA3B;;;;UASAgJ,aAAa,GAA4ChH,UAA7D;;UACI,CAAC8F,eAAL,EAAsB;YACdmB,SAAS,GAAGlD,MAAM,CAACQ,OAAD,CAAN,CAAgBlI,GAAhB,CAAoB,UAAC6K,CAAD,EAAIjB,MAAJ;iBACpC9J,KAAK,CAACgJ,OAAN,CAAcH,SAAd,IAA2BA,SAAS,CAACmC,QAAV,CAAmBlB,MAAnB,CAA3B,GAAwDjB,SADpB;SAApB,CAAlB;YAGMoC,OAAO,GAAGrD,MAAM,CAACQ,OAAD,CAAN,CAAgBlI,GAAhB,CAAoB,UAAC6K,CAAD,EAAIjB,MAAJ;iBAClC9J,KAAK,CAACgJ,OAAN,CAAcF,SAAd,IAA2BA,SAAS,CAACkC,QAAV,CAAmBlB,MAAnB,CAA3B,GAAwDhB,SADtB;SAApB,CAAhB;;YAGM4B,aAAW,GAAGjC,WAAW,CAACkC,OAAZ,CAAoBvC,OAApB,CAApB;;YACMwC,cAAY,GAAG1B,YAAY,CAACyB,OAAb,CAAqBvC,OAArB,CAArB;;QACAyC,aAAa,GAAG,uBAAClI,CAAD,EAAIvC,CAAJ;cACR2D,WAAW,GAAG,CAACsF,QAAD,GAAY,CAAZ,GAAgByB,SAAS,CAAC1K,CAAD,CAAT,GAAe,CAAf,GAAmB6E,UAAvD;cACMjB,SAAS,GAAG,CAACsF,QAAD,GAAY,CAAZ,GAAgB2B,OAAO,CAAC7K,CAAD,CAAP,GAAa,CAAb,GAAiB6E,UAAnD;cACMa,SAAS,GACb/B,WAAW,GAAGC,SAAd,GACIa,WAAW,CACTd,WADS,EAETC,SAFS,EAGT0G,aAHS,EAITjC,WAAW,CAAC5G,MAJH,CADf,GAOIkD,YAAY,CACVhB,WADU,EAEVC,SAFU,EAGV4G,cAHU,EAIV1B,YAAY,CAACrH,MAJH,CARlB;iBAcOiE,SAAS,CAACnD,CAAD,CAAhB;SAjBF;;;aAqBK;QACLyF,OAAO,EAAPA,OADK;QAELkC,WAAW,EAAXA,WAFK;QAGLV,aAAa,EAAbA,aAHK;QAILa,YAAY,EAAZA,YAJK;QAKLI,aAAa,EAAbA,aALK;QAMLR,iBAAiB,EAAjBA;OANF;KA7HK,CAAP;GAjCY,EAuKX,CAAC9E,QAAD,CAvKW,CAAd;SA0KEvH,mBAAA,CAACA,KAAK,CAACkN,QAAP,MAAA,EACG9J,KAAK,CAAClB,GAAN,CACC;QACEoK,WADF,SACEA,WADF;QAEElC,OAFF,SAEEA,OAFF;QAGEwB,aAHF,SAGEA,aAHF;QAIEa,YAJF,SAIEA,YAJF;QAKEI,aALF,SAKEA,aALF;QAMER,iBANF,SAMEA,iBANF;WAQEC,WAAW,IACTtM,mBAAA,MAAA;MACEK,KAAK;QAAIkM,QAAQ,EAAE;SAAaE,YAAY,CAAC9H,CAAD,CAAvC;MACL2F,GAAG,EAAEF;KAFP,EAIEpK,mBAAA,MAAA;MACEK,KAAK,EAAE;QAAEmM,OAAO,EAAE;;MAClBT,SAAS,uBAAqB3B;KAFhC,EAIGiC,iBAJH,EAKGT,aAAa,IACZhC,MAAM,CAACQ,OAAD,CAAN,CAAgBlI,GAAhB,CAAoB,UAAC2J,KAAD,EAAQC,MAAR;aAClB9L,mBAAA,OAAA;QACE+L,SAAS,EAAE,WAAWlC,KAAK,CAACO,OAAD,CAAL,CAAe0B,MAAf;QACtBzL,KAAK,EAAEwM,aAAc,CAAClI,CAAD,EAAImH,MAAJ;QACrBxB,GAAG,EAAEwB;OAHP,EAKGD,KALH,CADkB;KAApB,CANJ,CAJF,CATJ;GADD,CADH,CADF;;;IC9MWsB,KAAb;;AAAA;iBAIcjF,IAAZ,EAA4BC,IAA5B;SACOD,IAAL,GAAYA,IAAZ;SACKC,IAAL,GAAYA,IAAZ;;;;;SAGFX,MATF,GASE;QACQU,IAAI,GAAG,KAAKA,IAAlB;QACMC,IAAI,GAAG,KAAKA,IAAlB;WACO,CAACD,IAAD,EAAOC,IAAP,CAAP;GAZJ;;SAeEwC,MAfF,GAeE,gBAAUyC,QAAV;uBACuB,KAAK5F,MAAL;QAAdU;QAAMC;;QACNkF,UACLnF,IAAI,KAAK,IAAT,GAAgB,IAAhB,GAAuBA,IAAI,KAAKnF,SAAT,GAAqBA,SAArB,GAAiCqK,QAAQ,CAAClF,IAAD;QADlDoF,UAEdnF,IAAI,KAAK,IAAT,GAAgB,IAAhB,GAAuBA,IAAI,KAAKpF,SAAT,GAAqBA,SAArB,GAAiCqK,QAAQ,CAACjF,IAAD;WAE3D,IAAIgF,KAAJ,CAAUE,OAAV,EAAmBC,OAAnB,CAAP;GArBJ;;SAwBEnD,UAxBF,GAwBE,oBAAoCiD,QAApC;wBACuB,KAAK5F,MAAL;QAAdU;QAAMC;;QACNkF,UACLnF,IAAI,KAAK,IAAT,GAAgB,IAAhB,GAAuBA,IAAI,KAAKnF,SAAT,GAAqBA,SAArB,GAAiCqK,QAAQ,CAAClF,IAAD;QADlDoF,UAEdnF,IAAI,KAAK,IAAT,GAAgB,IAAhB,GAAuBA,IAAI,KAAKpF,SAAT,GAAqBA,SAArB,GAAiCqK,QAAQ,CAACjF,IAAD;WAE3D,IAAIoF,UAAJ,CAAkBF,OAAlB,EAA2BC,OAA3B,CAAP;GA9BJ;;SAiCErB,GAjCF,GAiCE;wBACuB,KAAKzE,MAAL;QAAdU;QAAMC;;WACND,IAAI,IAAI,IAAR,GAAeC,IAAf,GAAsBD,IAA7B;GAnCJ;;SAsCEsF,GAtCF,GAsCE,aAAIC,IAAJ;UACQnE,KAAK,CAAC,kCAAD,CAAX;GAvCJ;;SA0CEpH,GA1CF,GA0CE,aAAIwL,OAAJ;UACQpE,KAAK,CAAC,kCAAD,CAAX;GA3CJ;;;;AA+CA,IAAaiE,UAAb;;AAAA;;;;;;;;;UAGEI,eAHF,GAGE;QACM,CAAC,KAAKC,KAAV,EAAiB;0BACkB,KAAKpG,MAAL,EADlB;UACRqG,UADQ;UACIC,UADJ;;UAETC,KAAK,GAAQF,UAAU,IAAI,EAAjC;UACMG,KAAK,GAAQF,UAAU,IAAI,EAAjC;UAEMG,WAAW,GAAG,IAAIC,GAAJ,CAClBH,KAAK,CAAC7L,GAAN,CAAU,UAAAgG,IAAI;eAAI,CAACA,IAAI,CAACoC,GAAN,EAAW;UAAEpC,IAAI,EAAJA;SAAb,CAAJ;OAAd,CADkB,CAApB;MAGA8F,KAAK,CAACG,OAAN,CAAc,UAAAhG,IAAI;mBACC8F,WAAW,CAACT,GAAZ,CAAgBrF,IAAI,CAACmC,GAArB,KAA6B;UAAEpC,IAAI,EAAEnF;;YAA9CmF,YAAAA;;QACR+F,WAAW,CAACG,GAAZ,CAAgBjG,IAAI,CAACmC,GAArB,EAA0B;UAAEpC,IAAI,EAAJA,IAAF;UAAQC,IAAI,EAAJA;SAAlC;OAFF;UAKMkG,UAAU,GAAGrM,KAAK,CAACC,IAAN,CAAWgM,WAAW,CAACK,IAAZ,EAAX,CAAnB;MACAD,UAAU,CAACE,IAAX,CAAgB,UAACC,CAAD,EAAIC,CAAJ;eAAWD,CAAC,GAAGC,CAAJ,GAAQ,CAAC,CAAT,GAAaD,CAAC,GAAGC,CAAJ,GAAQ,CAAR,GAAY,CAApC;OAAhB;WACKb,KAAL,GAAa,IAAIM,GAAJ,CACXG,UAAU,CAACnM,GAAX,CAAe,UAAAoI,GAAG;oBAEd2D,WAAW,CAACT,GAAZ,CAAgBlD,GAAhB,KAAwB;+BADlBpC;YAAAA,+BAAOnF;+BAAWoF;YAAAA,+BAAOpF;;eAE1B,CAACuH,GAAD,EAAM,IAAI6C,KAAJ,CAAUjF,IAAV,EAAgBC,IAAhB,CAAN,CAAP;OAHF,CADW,CAAb;;;WAQK,KAAKyF,KAAZ;GA3BJ;;UA8BEJ,GA9BF,GA8BE,aAAIlD,GAAJ;QACQoE,WAAW,GAAG,KAAKf,eAAL,EAApB;;WACOe,WAAW,CAAClB,GAAZ,CAAgBlD,GAAhB,CAAP;GAhCJ;;UAmCEpI,GAnCF,GAmCE,aAAOyM,MAAP;;;QACQD,WAAW,GAAG,KAAKf,eAAL,EAApB;;QACMlM,MAAM,GAAQ,EAApB;IACAiN,WAAW,CAACP,OAAZ,CAAoB,UAACS,KAAD,EAAQtE,GAAR;aAAgB7I,MAAM,CAACoN,IAAP,CAAYF,MAAM,CAACC,KAAD,EAAQtE,GAAR,EAAa,KAAb,CAAlB,CAAhB;KAApB;WACO7I,MAAP;GAvCJ;;;EAAyD0L,KAAzD;;ACxBA,SAAS2B,mBAAT;MACEC,gBAAAA;MACAlM,kBAAAA;MACAtB,aAAAA;MACAqI,cAAAA;MACAC,aAAAA;MACAE,oBAAAA;MACAC,mBAAAA;MAEM9B,IAAI,GAAG3G,KAAK,CAACgB,IAAI,CAACyM,KAAL,CAAWD,QAAX,CAAD,CAAlB;MACM5G,IAAI,GAAG5G,KAAK,CAACgB,IAAI,CAACyM,KAAL,CAAWD,QAAX,IAAuB,CAAxB,CAAlB;MACMxH,QAAQ,GAAGvH,KAAK,CAACiK,OAAN,CAAc;WAAM,IAAIkD,KAAJ,CAAUjF,IAAV,EAAgBC,IAAhB,CAAN;GAAd,EAA2C,CAACD,IAAD,EAAOC,IAAP,CAA3C,CAAjB;MAEM8G,SAAS,GAAGjP,KAAK,CAACiK,OAAN,CAAc;WAAM1C,QAAQ,CAACoD,MAAT,CAAgB,UAAA3H,IAAI;aAAIA,IAAI,CAACU,KAAT;KAApB,CAAN;GAAd,EAAyD,CACzE6D,QADyE,CAAzD,CAAlB;MAGM2H,YAAY,GAAGlP,KAAK,CAACiK,OAAN,CACnB;WAAM1C,QAAQ,CAACoD,MAAT,CAAgB,UAAA3H,IAAI;aAAIA,IAAI,CAACW,QAAT;KAApB,CAAN;GADmB,EAEnB,CAAC4D,QAAD,CAFmB,CAArB;MAKM5C,CAAC,GAAGoK,QAAQ,GAAG,CAArB;SAGE/O,mBAAA,MAAA;IACE+L,SAAS,EAAC;IACV1L,KAAK,EAAE;MACL8O,KAAK,EAAE,MADF;MAEL5I,MAAM,EAAE1D,UAAU,GAAGA,UAAU,CAACP,eAAd,GAAgC,MAF7C;MAGL8M,SAAS,EAAE,MAHN;MAILC,QAAQ,EAAE;;GANd,EASErP,mBAAA,CAACsP,iBAAD;IACEzM,UAAU,EAAEA;IACZ0E,QAAQ,EAAEA;IACV5C,CAAC,EAAEA;IACHiF,MAAM,EAAEA;IACRC,KAAK,EAAEA;IACPE,YAAY,EAAEA;IACdC,WAAW,EAAEA;GAPf,CATF,EAkBEhK,mBAAA,CAACuP,KAAD;IAAOC,QAAQ,EAAEP;IAAWtK,CAAC,EAAEA;GAA/B,CAlBF,EAmBE3E,mBAAA,CAACyP,QAAD;IAAUD,QAAQ,EAAEN;IAAcvK,CAAC,EAAEA;GAArC,CAnBF,CADF;;;AAyBF,SAAS2K,iBAAT;MACEzM,mBAAAA;MACA0E,iBAAAA;MACA5C,UAAAA;MACAiF,eAAAA;MACAC,cAAAA;MACAE,qBAAAA;MACAC,oBAAAA;MAUM1I,GAAG,GAAGtB,KAAK,CAAC0P,MAAN,CAAoC,IAApC,CAAZ;MAEMC,cAAc,GAAG3P,KAAK,CAACiK,OAAN,CACrB;WAAMhC,YAAY,CAACV,QAAD,EAAW1E,UAAX,CAAlB;GADqB,EAErB,CAAC0E,QAAD,EAAW1E,UAAX,CAFqB,CAAvB;MAKM+M,eAAe,GAAG5P,KAAK,CAACiK,OAAN,CACtB;WAAM3C,aAAa,CAACC,QAAD,EAAW1E,UAAX,CAAnB;GADsB,EAEtB,CAAC0E,QAAD,EAAW1E,UAAX,CAFsB,CAAxB;MAKMgN,KAAK,GAAGF,cAAc,CAAChL,CAAD,CAA5B;MACMmL,SAAS,GAAGF,eAAe,CAACjL,CAAD,CAAjC;MACMoL,cAAc,GAAGlN,UAAU,GAC7BA,UAAU,CAACP,eAAX,GAA6B,CAA7B,GAAiCwN,SADJ,GAE7B,CAFJ;EAIA9P,KAAK,CAAC2B,eAAN,CAAsB;QAChBL,GAAG,CAACM,OAAJ,IAAe,IAAnB,EAAyB;IACzBN,GAAG,CAACM,OAAJ,CAAYkO,SAAZ,GAAwBA,SAAxB;GAFF,EAGG,CAACA,SAAD,CAHH;MAKMhG,cAAc,GAAGkG,wBAAiB,EAAxC;SAGEhQ,mBAAA,CAACiQ,aAAM,CAACC,GAAR;IACEnE,SAAS,EAAC;IACVzK,GAAG,EAAEA;IACLjB,KAAK,EAAE;MACLM,MAAM,EAAE,CADH;MAEL4F,MAAM,EAAE,MAFH;MAGLgG,QAAQ,EAAE;;GANd,EASEvM,mBAAA,CAACiQ,aAAM,CAACE,IAAR;IACEpE,SAAS,EAAC;IACV1L,KAAK,EAAE;MACLmM,OAAO,EAAE,OADJ;;MAGLjG,MAAM,EAAE1D,UAAU,GAAGA,UAAU,CAACC,aAAd,GAA8B,MAH3C;MAILqM,KAAK,EAAEtM,UAAU,IAAIA,UAAU,CAACF,YAJ3B;MAKLhC,MAAM,EACJkC,UAAU,WACL,CAACA,UAAU,CAACH,cAAX,GAA4BG,UAAU,CAACF,YAAxC,IAAwD,CADnD,OANP;MAQLgE,SAAS,aAAWkJ,KAAX,MARJ;MASLO,eAAe,cAAYL,cAAZ;;GAXnB,EAcE/P,mBAAA,MAAA;IAAKK,KAAK,EAAE;MAAEkG,MAAM,EAAE1D,UAAU,IAAIA,UAAU,CAACP,eAAX,GAA6B;;GAAjE,CAdF,EAeEtC,mBAAA,CAAC2J,QAAD;IACEpC,QAAQ,EAAEA;IACV5C,CAAC,EAAEA;IACHiF,MAAM,EAAEA;IACRC,KAAK,EAAEA;IACPhH,UAAU,EAAEA;IACZiH,cAAc,EAAEA;IAChBC,YAAY,EAAEA;IACdC,WAAW,EAAEA;GARf,CAfF,EAyBEhK,mBAAA,MAAA;IAAKK,KAAK,EAAE;MAAEkG,MAAM,EAAE1D,UAAU,IAAIA,UAAU,CAACP,eAAX,GAA6B;;GAAjE,CAzBF,CATF,CADF;;;AA2CF,SAASiN,KAAT;MAAiBC,iBAAAA;MAAU7K,UAAAA;;MACrB,CAAC6K,QAAQ,CAACvD,GAAT,EAAL,EAAqB;WACZ,IAAP;;;yBAGmBuD,QAAQ,CAAChI,MAAT;MAAdU;MAAMC;;MACPkI,IAAI,GAAG1L,CAAC,GAAG,GAAJ,GAAUuD,IAAV,GAAiBC,IAA9B;MACMmI,SAAS,GAAGpI,IAAI,KAAKC,IAAT,GAAgBnB,SAAS,GAAGrC,CAAH,CAAzB,GAAiC5B,SAAnD;MACMwN,eAAe,GACnBrI,IAAI,IAAIC,IAAR,GAAepF,SAAf,GAA2B,CAACmF,IAAD,GAAQd,UAAU,GAAGzC,CAAH,CAAlB,GAA0B0C,WAAW,GAAG1C,CAAH,CADlE;SAIE3E,mBAAA,CAACiQ,aAAM,CAACV,KAAR;IAAcxD,SAAS,EAAC;IAAW1L,KAAK,EAAEkQ;GAA1C,EACEvQ,mBAAA,OAAA;IAAMK,KAAK,EAAEiQ;GAAb,EAAyBD,IAAzB,CADF,CADF;;;AAOF,SAASZ,QAAT;MAAoBD,iBAAAA;MAAU7K,UAAAA;;MACxB,CAAC6K,QAAQ,CAACvD,GAAT,EAAL,EAAqB;WACZ,IAAP;;;0BAGmBuD,QAAQ,CAAChI,MAAT;MAAdU;MAAMC;;MACPkI,IAAI,GAAG1L,CAAC,GAAG,GAAJ,GAAUuD,IAAV,GAAiBC,IAA9B;MACMmI,SAAS,GAAGpI,IAAI,KAAKC,IAAT,GAAgBnB,SAAS,GAAGrC,CAAH,CAAzB,GAAiC5B,SAAnD;MACMwN,eAAe,GACnBrI,IAAI,IAAIC,IAAR,GAAepF,SAAf,GAA2B,CAACmF,IAAD,GAAQd,UAAU,GAAGzC,CAAH,CAAlB,GAA0B0C,WAAW,GAAG1C,CAAH,CADlE;SAIE3E,mBAAA,CAACiQ,aAAM,CAACR,QAAR;IAAiB1D,SAAS,EAAC;IAAc1L,KAAK,EAAEkQ;GAAhD,EACEvQ,mBAAA,OAAA;IAAMK,KAAK,EAAEiQ;GAAb,EAAyBD,IAAzB,CADF,CADF;;;SC3KcG;MACdzB,gBAAAA;MACAxN,aAAAA;MACAqI,cAAAA;MACAC,aAAAA;MACAE,oBAAAA;8BACAC;MAAAA,4CAAc;MAERyG,SAAS,GAAGzQ,KAAK,CAACiK,OAAN,CAAc;WAAMyG,YAAY,CAACnP,KAAD,EAAQqI,MAAR,CAAlB;GAAd,EAAiD,CAACrI,KAAD,CAAjD,CAAlB;MAEMD,GAAG,GAAGtB,KAAK,CAAC0P,MAAN,CAA6B,IAA7B,CAAZ;;uBACmDrO,aAAa,CAACC,GAAD,EAAMC,KAAN;MAAxDsB,4BAAAA;MAAmB8N,qCAAPpP;;MAChB,CAACsB,UAAD,IAAe,CAAC8N,mBAApB,EAAyC;WAErC3Q,mBAAA,MAAA;MACEsB,GAAG,EAAEA;MACLjB,KAAK,EAAE;QAAEkM,QAAQ,EAAE,MAAZ;QAAoBhG,MAAM,EAAE,MAA5B;QAAoC4I,KAAK,EAAE;;KAFpD,EAIGsB,SAAS,CAACvO,GAAV,CAAc,UAAC0O,KAAD,EAAQxO,CAAR;aACbpC,mBAAA,MAAA;QACEsK,GAAG,EAAElI;QACL/B,KAAK,EAAE;UACLkM,QAAQ,EAAE,MADL;UAELhG,MAAM,EAAE,MAFH;UAGL4I,KAAK,EAAE;;OALX,EAQEnP,mBAAA,CAAC6Q,mBAAD;QACEtP,KAAK,EAAEkP;QACP1B,QAAQ,EAAE3M;QACVwH,MAAM,EAAEA;QACRC,KAAK,EAAEA;QACPE,YAAY,EAAEA;QACdC,WAAW,EAAEA;OANf,CARF,CADa;KAAd,CAJH,CADF;GADF,MA2BO;WAEHhK,mBAAA,MAAA;MACEK,KAAK,EAAE;QAAEkG,MAAM,EAAE,MAAV;QAAkB4I,KAAK,EAAE,MAAzB;QAAiC5C,QAAQ,EAAE;;MAClDjL,GAAG,EAAEA;KAFP,EAIEtB,mBAAA,CAAC6Q,mBAAD;MACEtP,KAAK,EAAEoP;MACP5B,QAAQ,EAAEA;MACVlM,UAAU,EAAEA;MACZ+G,MAAM,EAAEA;MACRC,KAAK,EAAEA;MACPE,YAAY,EAAEA;MACdC,WAAW,EAAEA;KAPf,CAJF,CADF;;;;AAmBJ,SAAS0G,YAAT,CAAsBI,WAAtB,EAA2ClH,MAA3C;MACMmH,YAAY,GAAG,CAAnB;MACIlN,MAAM,GAAG,GAAb;;OACK,IAAIzB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwH,MAAM,CAAC/F,MAA3B,EAAmCzB,CAAC,EAApC,EAAwC;QAClCwH,MAAM,CAACxH,CAAD,CAAN,CAAUyB,MAAV,GAAmBA,MAAvB,EAA+B;MAC7BA,MAAM,GAAG+F,MAAM,CAACxH,CAAD,CAAN,CAAUyB,MAAnB;MACAkN,YAAY,GAAG3O,CAAf;;;QAEEyB,MAAM,IAAI,CAAd,EAAiB;;;;;MAKb4M,SAAS,GAAGK,WAAW,CAAC5O,GAAZ,CAAgB,UAAAc,IAAI;QAC9BgO,QAAQ,gBACThO,IADS;MAEZI,KAAK,EAAEJ,IAAI,CAACI,KAAL,CAAWlB,GAAX,CAAe,UAAA6K,CAAC;eAAIgE,YAAJ;OAAhB,CAFK;MAGZ1N,gBAAgB,EAAE;MAHpB;;IAKA2N,QAAQ,CAAC5N,KAAT,CAAe,CAAf,IAAoBJ,IAAI,CAACI,KAAL,CAAWJ,IAAI,CAACK,gBAAhB,CAApB;WACO2N,QAAP;GAPgB,CAAlB;EASAP,SAAS,CAAC,CAAD,CAAT,GAAeK,WAAW,CAAC,CAAD,CAA1B;SACOL,SAAP;;;ACxEF,SAASQ,eAAT;MACElC,gBAAAA;MACOmC,kBAAP3P;MACAuP,mBAAAA;;uBAQI9Q,KAAK,CAACiK,OAAN,CAAc;QACZ6G,WAAJ,EAAiB,OAAOA,WAAP;WACVK,qBAAU,CAACD,UAAD,CAAjB;GAFE,EAGD,CAACA,UAAD,EAAaJ,WAAb,CAHC;MALFvP,uBAAAA;MACAqI,wBAAAA;MACAC,uBAAAA;MACAE,8BAAAA;MACAC,6BAAAA;;MAME,CAACzI,KAAD,IAAUA,KAAK,CAACsC,MAAN,KAAiB,CAA/B,EAAkC;UAC1B,IAAIyF,KAAJ,CAAU,UAAV,CAAN;;;SAIAtJ,mBAAA,CAACwQ,UAAD;IACEzB,QAAQ,EAAEA;IACVxN,KAAK,EAAEA;IACPqI,MAAM,EAAEA;IACRC,KAAK,EAAEA;IACPE,YAAY,EAAEA;IACdC,WAAW,EAAEA;GANf,CADF;;;AAYF,SAASoH,iBAAT;MAA6BC,cAAAA;MAAOC,oBAAAA;MAAgBC;;wBAC1BvR,KAAK,CAACwB,QAAN,CAAe8P,WAAf;MAAjBE;MAAMC;;EAEbzR,KAAK,CAACiB,SAAN,CAAgB;QACV,CAACuQ,IAAL,EAAW;IACXC,OAAO,CAAC,KAAD,CAAP;GAFF,EAGG,EAHH;MAKID,IAAJ,EACE,OACExR,mBAAA,CAAC0R,qBAAD;IAAgBL,KAAK,EAAEA;GAAvB,EACErR,mBAAA,CAACiQ,aAAM,CAAC0B,WAAR,MAAA,CADF,CADF;SAOA3R,mBAAA,CAAC0R,qBAAD;IAAgBL,KAAK,EAAEA;GAAvB,EACErR,mBAAA,CAACiR,eAAD,oBAAqBM,MAArB,CADF,CADF;;;;;;"}